u.ns("ui.cno");
$(function() {
	ui.cno.init()
});
ui.cno = {
	prizeLimit: 500000,
	issueLimit: {
		0: 120,
		1: 120,
		2: 120,
		3: 120,
		5: 120,
		6: 120,
		7: 500,
		8: 120,
		9: 120,
		10: 500,
		11: 2,
		13: 120,
		14: 500,
		18: 120,
		19: 120,
		20: 120,
		21: 500,
		22: 2,
		23: 500,
		24: 500,
		25: 120,
		26: 500,
		27: 2,
		28: 500,
		29: 120,
		30: 120
	},
	refreshThreshold: 2,
	forbidden: [],
	defaultIssueCount: 10,
	issues: null,
	tab: "cno-normal",
	isSummary: false,
	play: null,
	prize: 0,
	price: 0,
	init: function() {
		$("#order-cno-tab a").off("click").on("click", function() {
			ui.cno.tab = $(this).attr("id");
			$("#order-cno-tab a").removeClass("active");
			$(this).addClass("active");
			$(".order-cno").find("[class$=-param]").hide();
			$(".order-cno").find("." + ui.cno.tab + "-param").show();
			ui.cno.reset()
		});
		var b = $("#order-cno-count");
		u.positiveIntOnly(b, ui.cno.defaultIssueCount, function() {
			var e = ui.cno.issueLimit[g.id()];
			if (b.val() > e) {
				b.val(e)
			}
			if (b.val() > ui.cno.issues.length) {
				b.val(ui.cno.issues.length)
			}
			ui.cno.cnoRow(b.val())
		});
		var a = $("#order-cno-m-start");
		u.positiveIntOnly(a, "1", function() {
			if (ui.cno.tab == "cno-normal") {
				$("#order-cno-list li:first input").val(a.val())
			}
			ui.cno.updateCNO()
		});
		u.positiveIntOnly($("#order-cno-m-interval, #order-cno-m"), "1", function() {
			ui.cno.updateCNO()
		});
		$(document).on("Ready", function() {
			ui.cno.loadIssues()
		});
		$(document).on("OrderCnoSuccess", function(j, h) {
			ui.cno.reset();
			var k = h.d;
			$("#order-multiplier").val("1");
			$("#order-cno-number").text(k[0]).attr("val", k[4]);
			$("#order-cno-payable").text(u.currency(k[1]));
			$("#order-cno-rebate").text(u.currency(k[2]));
			$("#order-cno-amount").text(u.currency(k[3]));
			$("#order-cno-clear").val("1");
			var f = h.dc;
			f.find(".v-m-w p").html(l.o.success).removeClass("rt");
			u.toggle(f, ".order-step-2", ".order-step-1");
			u.toggle(f, ".order-step-2", ".order-progress")
		});
		$(document).on("SaleStopped", function(h, f) {
			if ($("#order-cno-number").text() == "-") {
				$("#order-cno-issue").text(f.d[1])
			}
			ui.cno.issues = $(ui.cno.issues).filter(function(e, j) {
				return j[0] >= f.d[0]
			});
			$("#order-cno-count").trigger("keyup");
			ui.cno.updateIssueNo();
			if (!ui.cno.issues || ui.cno.issues.length < ui.cno.refreshThreshold) {
				ui.cno.loadIssues()
			}
		})
	},
	loadIssues: function() {
		d.o.issues(function(a) {
			ui.cno.issues = a
		}, function(a) {
			u.alert(u.translateError(a))
		})
	},
	cno: function() {
		if (!u.isMember(c.m)) {
			u.login(l.sys.login);
			return
		}
		var b = $("#list-cart-row li"),
			a = $("#order-cno-clear");
		if (b.length <= 0) {
			u.alert(l.o.empty);
			return
		}
		a.val("");
		ui.cno._prepareCno();
		$("#cno-normal").trigger("click");
		ui.cno.updateIssueNo();
		ui.o.confirm("cno", function(e) {
			var k = [],
				f = $("#order-cno-list").find("li"),
				j = ui.o.orderDetail($("#order-cno-count").val(), $("#order-cno-win-stop").prop("checked") ? "1" : "0"),
				h = $("#order-cno-from").html();
			$.each(f, function() {
				k.push($(this).find("input").val())
			});
			j.push(k);
			u.toggle(e, ".order-progress", ".order-step-1");
			u.toggle(e, ".order-progress", ".order-step-2");
			d.o.submit(j, function(n) {
				var m = {
					dc: e,
					d: n,
					g: c.g.id,
					s: h
				};
				$(document).trigger("OrderCnoSuccess", m);
				$(document).trigger("OrderSuccess", m)
			}, function(m) {
				$(document).trigger("OrderError", {
					dc: e,
					c: m
				})
			});
			if (c.sync) {
				d.a.save({
					u: c.m.u,
					p: c.m.g.p
				});
				c.sync = false
			}
		}, function() {
			if (a.val().length > 0) {
				ui.o.clear();
				ui.o.toggleCart(false)
			}
		})
	},
	reset: function() {
		$("#order-cno-list").empty();
		$("#order-cno-total-multiplier").text("-");
		$("#order-cno-total-amount").text("-");
		$("#order-cno-m-start").val(1);
		if (ui.cno.tab == "cno-normal") {
			var b = ui.cno.defaultIssueCount;
			var a = ui.cno.issueLimit[g.id()];
			if (b > a) {
				b = a
			}
			$("#order-cno-count").val(b);
			ui.cno.cnoRow(b);
			$("#order-cno-confirm").removeClass("disabled")
		} else {
			$("#cno-profit-value-expect").val(100);
			$("#cno-profit-rate-expect").val(100);
			$("#order-cno-confirm").addClass("disabled")
		}
	},
	_prepareCno: function() {
		var f = ui.o.cache,
			e = 0,
			a = 0,
			b = {};
		$(f).each(function() {
			e += parseFloat(this.prize) * 1000;
			a += parseFloat(this.price) * 1000;
			var h = this.cd;
			if (!b[h]) {
				b[h] = 1
			} else {
				b[h] += 1
			}
		});
		ui.cno.prize = e;
		ui.cno.price = a;
		ui.cno.play = b;
		ui.cno.isSummary = false;
		$("#order-cno-setting-game, #order-cno-summary-game").text(u.label("game", c.g.cd));
		$("#order-cno-number").text("-");
		$("#order-cno-issue").text($("#game-issue").text());
		$(".order-dialog-message").text(ui.o.disclaimer(f) || "");
		u.toggle($("#order-cno"), "#order-cno-setting", "#order-cno-summary");
		$(".ribbon").fadeOut()
	},
	updateIssueNo: function() {
		$("#order-cno-from").html(ui.cno.issues[0][1]);
		$("#order-cno-list li").each(function(a, b) {
			$(this).find(".sn").html(ui.cno.issues[a][1])
		})
	},
	cnoRow: function(a) {
		if (ui.cno.tab != "cno-normal" || ui.cno.isSummary) {
			return
		}
		var f = $("#order-cno-list"),
			w = f.find("li"),
			q = $("#order-cno-m-start").val(),
			j = c.m,
			k = 0,
			x = true,
			e = [];
		if (w.length > 0) {
			k = w.length;
			if (k >= a) {
				x = false
			} else {
				if (k < a) {
					x = true;
					a = a - k
				}
			}
		}
		if (x) {
			var p, v, h = k;
			for (i = 0; i < a; i++) {
				h++;
				e = [];
				p = _.uniqueId();
				q = (i == 0) ? q : "1";
				e.push('<li r="" p="" t="" i="' + i + '"><div class="col-18 sn">');
				e.push('</div><div class="col-10"><input id="order-cno-input-');
				e.push(p);
				e.push('" type="text" value="');
				e.push(q);
				e.push('" maxlength="3" /></div><div class="col-12 order-cno-row-amount">-</div><div class="col-12 order-cno-row-total">-</div>');
				e.push('<div class="col-16 order-cno-row-prz">-</div><div class="col-16 order-cno-row-prf">-</div><div class="col-16 order-cno-row-prr">-</div></li>');
				f.append(e.join(""));
				v = $("#order-cno-input-" + p);
				u.positiveIntOnly(v, "1", function(b) {
					ui.cno.mHandler(b)
				})
			}
		} else {
			var w = f.find("li:gt(" + (a - 1).toString() + ")").remove()
		}
		ui.cno.updateIssueNo();
		ui.cno.updateCNO()
	},
	updateCNO: function() {
		if (ui.cno.tab != "cno-normal" || ui.cno.isSummary) {
			return
		}
		var E = $("#order-cno-list").find("li"),
			F = c.m,
			q = parseInt($("#order-total-lot").text()),
			I = parseInt($("#order-cno-m-interval").val()),
			x = parseInt($("#order-cno-m").val()),
			H, w, f, B = 0,
			D = 0,
			A = 0,
			J = 0,
			h = 0,
			j = 0,
			a = 0,
			y = 0,
			k = 0,
			C = 0,
			v = 0,
			G = false,
			z = 0;
		$.each(E, function(b) {
			H = $(this);
			w = H.find("input");
			J = parseInt(w.val());
			if (isNaN(J)) {
				J = 1
			}
			if (b > 0 && x) {
				if (b % I == 0) {
					J = f * x
				} else {
					J = f
				}
			}
			w.val(J);
			o = ui.o.calculate(J.toString(), q, null);
			if (o.p > s.cno.limit) {
				G = true;
				z = b;
				return false
			}
			H.attr({
				r: u.floatingPoint(o.r, false),
				p: u.floatingPoint(o.p, false),
				t: u.floatingPoint(o.t, false)
			});
			B = parseInt(u.floatingPoint(o.r, false));
			D = parseInt(u.floatingPoint(o.p, false));
			A = parseInt(u.floatingPoint(o.t, false));
			h += B;
			j += D;
			a += A;
			y += J;
			ui.cno._updateRowValue($(H), J, a);
			f = J
		});
		if (G) {
			$("#order-cno-count").val(z);
			ui.cno.cnoRow(z)
		}
		ui.cno.updateSummary({
			tm: y,
			ta: a,
			tr: h
		})
	},
	mHandler: function(e) {
		var h = e.closest("li");
		var b = h.attr("i");
		var f = 0;
		var k = 0;
		var a;
		if (b > 0) {
			f = parseFloat(h.prev().find(".order-cno-row-total").html()) * 1000;
			k = parseFloat(h.prev().attr("r")) * 1000;
			a = e.closest("li").prev().nextAll()
		} else {
			a = $("#order-cno-list li")
		}
		a.each(function(p, q) {
			var n = parseInt($(q).find("input").val());
			f += ui.cno.price * n;
			k += f * c.m.g.r / 100;
			ui.cno._updateRowValue($(q), n, f, k)
		});
		var j = _.reduce($("#order-cno-list input"), function(m, n) {
			return m + parseInt($(n).val())
		}, 0);
		ui.cno.updateSummary({
			tm: j,
			ta: f,
			tr: k
		})
	},
	_updateRowValue: function(k, a, h, n) {
		var b = ui.cno.price * a;
		var f = ui.cno.prize * a;
		var e = f - h;
		var j = e * 100 / h;
		k.attr("r", n);
		k.find(".order-cno-row-amount").text(u.currency(u.floatingPoint(b, true)));
		k.find(".order-cno-row-total").text(u.currency(u.floatingPoint(h, true)));
		k.find(".order-cno-row-prz").text(u.currency(u.floatingPoint(f, true)));
		k.find(".order-cno-row-prf").text(u.currency(u.floatingPoint(e, true)));
		k.find(".order-cno-row-prr").text(u.percentage(j) + "%")
	},
	updateSummary: function(a) {
		$("#order-cno-total-multiplier").text(a.tm);
		$("#order-cno-total-amount").text(u.currency(u.floatingPoint(a.ta, true)));
		$("#order-cno-issue").text(l.o.cno.replace("{0}", $("#order-cno-count").val()));
		$("#order-cno-multiplier").text(a.tm);
		$("#order-cno-lot").text(parseInt($("#order-total-lot").text()));
		$("#order-cno-amount").text(u.currency(u.floatingPoint(a.ta, true)));
		$("#order-cno-rebate").text(u.currency(u.floatingPoint(a.tr, true)));
		$("#order-cno-payable").text(u.currency(u.floatingPoint(a.ta - a.tr, true)))
	}
};
u.ns("ui.cnop");
$(function() {
	ui.cnop.init()
});
ui.cnop = {
	expect: 0,
	init: function() {
		$(".cno-btn").off("click").on("click", function() {
			ui.cnop.genCnoPlan()
		});
		u.positiveIntOnly($("#cno-profit-rate-expect, #cno-profit-value-expect"), "100", function() {})
	},
	genCnoPlan: function() {
		var b = true;
		if (Object.keys(ui.cno.play).length > 1) {
			alert("利润追号不支持混投，请选择单一玩法进行投注!");
			b = false
		}
		$(ui.cno.forbidden).each(function(n, v) {
			if (ui.cno.play[v]) {
				alert("利润追号不支持该玩法，请使用其他追号方式!");
				b = false;
				return false
			}
		});
		if (!b) {
			return false
		}
		var a = $("#order-cno-list");
		var e = parseInt($("#order-cno-m-start").val());
		var p = 0;
		var h = 0;
		var m = 0;
		var j = parseInt($("#order-cno-count").val());
		var q = parseInt($("#" + ui.cno.tab + "-expect").val());
		ui.cnop.expect = q;
		a.empty();
		for (var f = 0; f < j; f++) {
			var k = ui.cnop._calculateCnoRow(e, h, f);
			if (!k) {
				break
			}
			ui.cnop._appendCnoRow(a, k);
			e = k.m;
			m += k.b;
			p += k.m;
			h = k.c
		}
		u.positiveIntOnly($("[id^=order-cno-input-]"), "1", function(n) {
			ui.cno.mHandler(n)
		});
		if ($("#order-cno-list li").length > 0) {
			$("#order-cno-count").val($("#order-cno-list li").length);
			$("#order-cno-m-start").val($("#order-cno-list li:first input").val());
			$("#order-cno-confirm").removeClass("disabled")
		} else {
			$("#order-cno-confirm").addClass("disabled")
		}
		ui.cno.updateSummary({
			tm: p,
			ta: h,
			tr: m
		})
	},
	_calculateCnoRow: function(e, h, b) {
		var p = ui.cno.price * e;
		var m = p * c.m.g.r / 100;
		var f = h + p;
		var k = ui.cno.prize * e;
		var a = k - f;
		var j = a / f;
		var n;
		if (ui.cno.tab == "cno-profit-value") {
			n = a / 1000
		} else {
			n = j * 100
		}
		if ((k / 1000) > ui.cno.prizeLimit || e > 999) {
			alert("第" + (b + 1) + "期开始超过限额!");
			return false
		}
		if (n < ui.cnop.expect) {
			return ui.cnop._calculateCnoRow(e + 1, h, b)
		} else {
			return {
				i: b,
				m: e,
				a: p,
				c: f,
				p: k,
				f: a,
				r: j,
				b: m
			}
		}
	},
	_appendCnoRow: function(e, b) {
		var a = [];
		guid = _.uniqueId();
		a.push('<li r="' + b.b + '" p="" t="' + b.c + '" i="' + b.i + '">');
		a.push('<div class="col-18 sn">' + ui.cno.issues[b.i][1] + "</div>");
		a.push('<div class="col-10"><input id="order-cno-input-' + guid + '" type="text" value="' + b.m + '" maxlength="3" /></div>');
		a.push('<div class="col-12 order-cno-row-amount">' + u.currency(u.floatingPoint(b.a, true)) + "</div>");
		a.push('<div class="col-12 order-cno-row-total">' + u.currency(u.floatingPoint(b.c, true)) + "</div>");
		a.push('<div class="col-16 order-cno-row-prz">' + u.currency(u.floatingPoint(b.p, true)) + "</div>");
		a.push('<div class="col-16 order-cno-row-prf">' + u.currency(u.floatingPoint(b.f, true)) + "</div>");
		a.push('<div class="col-16 order-cno-row-prr">' + (u.percentage(b.r * 100)) + "%</div></li>");
		e.append(a.join(""))
	}
};
u.ns("ui.menu");
$(function() {
	ui.menu.init()
});
ui.menu = (function() {
	return {
		init: function() {
			$(document).on("Ready", function(b, a) {
				ui.menu.side.render();
				ui.menu.play.render(a)
			})
		}
	}
})();
ui.menu.play = (function() {
	return {
		render: function(m) {
			var n = c.cp,
				w = c.g,
				q = null,
				k = "",
				j = "",
				v = "",
				b = "",
				h = "",
				a = [],
				f = "";
			$.each(w.c, function() {
				k = this.c, v = u.label("play", k), b = this.m, a.push('<li id="');
				a.push(k);
				a.push('" class="play-menu-wrapper"><a href="#" class="play-option" id="');
				a.push('">');
				a.push(v);
				a.push('</a><div class="play-menu play-menu-col-');
				a.push(b);
				a.push('" style="display:none;"><div><span></span></div><ul>');
				$.each(this.s, function() {
					j = this.cd;
					q = g.play(n.play, j);
					v = u.label("play", "P" + j);
					a.push('<li><a id="');
					a.push(j);
					a.push('" me="');
					a.push(q.me);
					a.push('"><span data-hover="');
					a.push(v);
					a.push('">');
					a.push(v);
					a.push("</span></a></li>");
					if (n.dp == j) {
						h = j
					}
				});
				a.push("</ul></div></li>")
			});
			$("#play-menu").html(a.join(""));
			$(".play-menu-wrapper").hover(function() {
				$(this).find(".play-menu").fadeIn(100)
			}, function() {
				$(this).find(".play-menu").fadeOut(50)
			});
			$(".play-menu-wrapper a.play-option").click(function() {
				var p = $(this);
				$(".play-menu").hide();
				$(document).trigger("PlayUpdated", {
					cd: p.parent().find(".play-menu a").first().attr("id"),
					g: p.attr("id")
				})
			});
			$(".play-menu a").click(function() {
				var p = $(this);
				$(".play-menu").hide();
				$(".play-option").removeClass("play-option-select");
				p.closest(".play-menu-wrapper").find(".play-option").addClass("play-option-select");
				$(document).trigger("PlayUpdated", {
					cd: p.attr("id"),
					g: p.closest(".play-menu-wrapper").attr("id")
				})
			});
			var e = document.getElementById(h);
			$(e).click()
		}
	}
})();
ui.menu.side = (function() {
	var n = '<li><span @code><a href="order.jsp?g=@code&t=@grp">@name</a></span><span class="t@code">00:00:00</span></li>';
	var f = {};

	function h(q, w, x) {
		var y = this;
		var p = ".t" + q;
		var v = w;
		if (!p || !$(p) || !$(p).length) {
			return
		}
		if (f[q]) {
			clearInterval(f[q])
		}
		f[q] = setInterval(function() {
			v--;
			if (v >= 0) {
				if (v <= 30) {
					$(p).css("color", "#ffee00")
				} else {
					$(p).css("color", "#fff")
				}
				$(p).html((v + "").toHHMMSS())
			} else {
				v = x
			}
		}, 1000)
	}
	function a() {
		d.a.ticker([], function(v) {
			$(v).each(function(w, y) {
				var x = p(y.name)[0];
				if (x) {
					h(y.name, y.onSaleTime, y.nextTime - y.onSaleTime)
				}
			})
		}, function(v) {
			console.error(v)
		});
		var q = Math.floor((Math.random() * 40) + 20);
		setTimeout(a, q * 1000);

		function p(v) {
			return $(env.menu.recommand).filter(function(w, x) {
				return x.cd == v
			})
		}
	}
	function k() {
		env.menu.recommand = $(env.menu.recommand).filter(function(p, q) {
			return q.cd != u.qs("g")
		});
		if (env.menu.recommand.length > 5) {
			env.menu.recommand.splice(5)
		}
	}
	function b() {
		k();
		var p = [];
		$.each(env.menu.recommand, function(w, q) {
			var v = n.replace(/@code/g, q.cd).replace(/@name/g, q.title).replace(/@grp/g, q.grp);
			p.push(v)
		});
		$("#listRcmd").html(p.join(""));
		a()
	}
	function j() {
		var p = e(env.menu.platform);
		$("#listPlatform").html(p);
		$("#platformName").html(env.label.DZ)
	}
	function m() {
		var p = e(l.menu.official);
		$("#listOfficial").html(p)
	}
	function e(p) {
		var q = [];
		$.each(p, function(w, v) {
			var x = '<a href="order.jsp?g=' + v.cd + "&t=" + v.grp + '">' + v.title + "</a>";
			if ((w + 1) % 2 == 0) {
				q.push("<div>");
				q.push(x);
				q.push("</div></li>")
			} else {
				q.push("<li><div>");
				q.push(x);
				q.push("</div>")
			}
		});
		return q.join("")
	}
	return {
		render: function() {
			b();
			j();
			m()
		}
	}
})();
u.ns("ui.timer");
$(function() {
	ui.timer.init()
});
ui.timer = {
	tlock: false,
	otime: "",
	dtime: "",
	flipTimer: null,
	init: function() {
		$(document).on("DrawReady", function(a, b) {
			if (console) {
				console.info(new Date() + " draw ready: " + b.issue)
			}
			ui.timer.start(b.issue, false)
		});
		$(document).on("Ready", function(a, b) {
			ui.timer.heartbeat()
		})
	},
	render: function() {
		ui.timer.flipTimer = $("#game-timer").FlipClock({
			clockFace: "HourlyCounter",
			autoStart: false,
			countdown: true,
			callbacks: {
				interval: function() {
					if (console) {
						console.log("countdown tick " + ui.timer.flipTimer.time.time.toString().toHHMMSS())
					}
				},
				stop: function() {
					if (console) {
						console.info("refreshing timer: " + ui.timer.flipTimer.time.time)
					}
					setTimeout(function() {
						if (ui.timer.flipTimer.time.time == 0) {
							ui.timer.onExpiry()
						}
					}, 100)
				}
			}
		})
	},
	start: function(a, b) {
		ui.timer.render();
		ui.timer.countdown(a, (b) ? "sync" : "normal")
	},
	heartbeat: function() {
		setTimeout(function() {
			var b = $("#game-timer div").find("span").text(),
				a = $("#issue-timer span").find("span").text();
			if (b == ui.timer.otime || b.length == 0) {
				d.h.draw(g.id(), function(e) {
					ui.timer.countdown(e, "heartbeat")
				}, function(e) {})
			}
			if (ui.timer.dtime.length > 0 && a == ui.timer.dtime && a != "00:00:00") {
				console.info("refreshing issue...");
				ui.r.refreshIssue(g.id(), false)
			}
			ui.timer.otime = b;
			ui.timer.dtime = a;
			ui.timer.heartbeat()
		}, 5000)
	},
	countdown: function(a, b) {
		if (!ui.timer.tlock && a[2] > 2) {
			ui.timer.tlock = true;
			if (console) {
				console.log("reseting countdown " + a[1] + "," + a[2] + "," + a[3] + "," + a[4] + "," + a[5] + ", " + b)
			}
			$("#game-issue").text(a[1]).attr({
				i: a[0],
				d: a[1],
				t: a[2]
			});
			if (a[5] - a[2] < 0) {
				d.h.draw(g.id(), function(e) {
					ui.timer.countdown(e, "sync")
				}, function(e) {})
			}
			setTimeout(function() {
				ui.timer.updateTimer({
					until: a[2],
					issueId: a[3],
					issueSeq: a[4],
					issueGap: a[5] - a[2]
				});
				ui.timer.tlock = false
			}, 10)
		}
	},
	onExpiry: function() {
		setTimeout(function() {
			var a = $("#game-timer");
			var e = [a.attr("i"), a.attr("d"), a.attr("t"), "", "", 0],
				b = [$("#game-issue").attr("d")];
			$(document).trigger("SaleStopped", {
				d: e,
				pre: b
			});
			ui.timer.countdown(e, "expire")
		}, 0)
	},
	updateTimer: function(a) {
		var b = _.uniqueId("game-timer");
		$("#game-timer").attr("uid", b).attr("i", a.issueId).attr("d", a.issueSeq).attr("t", a.issueGap);
		ui.timer.flipTimer.stop();
		ui.timer.flipTimer.setTime(a.until);
		if (a.until > 0) {
			ui.timer.flipTimer.start()
		}
	}
};
u.ns("ui.g");
$(function() {
	ui.g.init()
});
ui.g = {
	init: function() {
		$(document).on("Ready", function(f, b) {
			var a = c.m;
			$("#play-order-manual").keydown(function(h) {
				if (ui.g.disableShift($("#play").attr("p"))) {
					if (h.shiftKey == true) {
						h.preventDefault()
					}
				}
				var j = (h.keyCode) ? h.keyCode : h.which;
				if (!ui.g.blacklist(j)) {
					if (!ui.g.whitelist(j)) {
						h.preventDefault()
					}
				}
			}).blur(function() {
				var e = $(this);
				e.val(ui.g.clean(e.val()))
			});
			$("#play-order-clear").click(function() {
				ui.g.clear()
			});
			$("#play-order-select").click(function() {
				($("#game-mode .active").attr("val") == "normal") ? ui.g.normal(false) : ui.g.manual(false)
			});
			$("#play-order-close").click(function() {
				$("#play-order-bet").removeClass("button-disabled").fadeIn(0);
				$("#play-order-close").hide();
				if (c.g.t != "JRZ") {
					$("#list-cart-row").fadeOut(0);
					$("#luzitu").fadeIn(0)
				}
			});
			$("#play-order-bet").click(function() {
				if (!$(this).hasClass("button-disabled")) {
					($("#game-mode .active").attr("val") == "normal") ? ui.g.normal(true) : ui.g.manual(true)
				}
			});
			$("#play-order-confirm").click(function() {
				$("#list-cart-menu").click()
			});
			$("#game-mode a").click(function() {
				var h = $(this),
					e = h.attr("val");
				if (e == "normal") {
					$("#game-mode a").removeClass("active");
					h.addClass("active");
					u.toggle($("#play"), "#play-normal", "#play-manual")
				} else {
					$("#game-mode a").removeClass("active");
					h.addClass("active");
					u.toggle($("#play"), "#play-manual", "#play-normal")
				}
			});
			$("#game-help").click(function() {
				u.popup($(this).attr("val"), 2, 1000, 600, 0, 1, 0)
			})
		});
		$(document).on("PlayUpdated", function(b, a) {
			ui.g.headerTab(a);
			ui.g.play(a)
		});
		$(document).on("PayoutUnitSaved", function(b, a) {
			ui.g.summary()
		});
		$(document).on("OrderSuccess", function() {
			ui.g.clear()
		});
		$(document).on("OrderCartUpdated", function(b, a) {
			if (a) {
				$("#play-order-bet").addClass("button-disabled").fadeOut(0);
				$("#list-cart-row").fadeIn(0);
				$("#luzitu").fadeOut(0)
			} else {
				$("#play-order-bet").removeClass("button-disabled").fadeIn(0);
				if (c.g.t != "JRZ") {
					$("#list-cart-row").fadeOut(0);
					$("#luzitu").fadeIn(0)
				}
			}
		});
		$(document).on("MemberReady", function(b, a) {
			ui.g.setPrize()
		})
	},
	headerTab: function(j) {
		var h = c.cp,
			f = c.g,
			b = g.play(c.cp.play, j.cd),
			e = u.qs("t").toUpperCase();
		$("#game-name").text(u.label("game", f.cd));
		var a = u.label("play", "P" + j.cd);
		if (f.t == "SSC" && (j.g == "G8")) {
			a += "不定位胆"
		}
		$("#play-name-title h1").text(a);
		$("#game-help").attr("val", "howto/howto.html#" + e + j.g);
		$("#game-mode").find("li").addClass("disabled").find("a").removeClass("active");
		if (b.ne) {
			$("#game-mode").find("li:nth-of-type(1)").removeClass("disabled").find("a").addClass("active")
		}
		if (b.me) {
			$("#game-mode").find("li:nth-of-type(2)").removeClass("disabled");
			if (!b.ne) {
				$("#game-mode").find("li:nth-of-type(2)").find("a").addClass("active")
			}
		}
	},
	play: function(b) {
		var a = g.play(c.cp.play, b.cd);
		mm = ui.g.mixMode(a.t), nm = ui.g.numberMode(a.t), ss = a.ss, t = a.t, r = [], id = "", gameType = u.qs("t").toUpperCase();
		$("#play-normal").empty();
		if (a.ne) {
			if (mm) {
				r.push(ui.g.header(t, a));
				$.each(a.r, function() {
					if (this.t == ui.g.type.text) {
						r.push('<div class="play-wrapper ');
						r.push(gameType);
						r.push('"><div class="label">');
						r.push(u.label("label", "R" + this.lb));
						r.push('</div><div class="button button-');
						r.push(a.mx);
						r.push('">');
						r.push("<ul>");
						for (var e = this.mn; e <= this.mx; e++) {
							r.push('<li><a class="number">');
							r.push(u.label("text", "T" + e));
							r.push("</a></li>")
						}
						r.push("</ul></div></div>")
					} else {
						r.push('<div class="play-wrapper ');
						r.push(gameType);
						r.push('"><div class="label">');
						r.push(u.label("label", "R" + this.lb));
						r.push("</div>");
						r.push('<div class="ball ball-');
						r.push(a.mx);
						r.push('"><ul>');
						for (var e = this.mn; e <= this.mx; e++) {
							r.push('<li><a class="number number-');
							r.push(e);
							r.push('">');
							r.push(e);
							r.push("</a></li>")
						}
						r.push("</ul></div>");
						r.push(ui.g._buildSelectOptionMenu(a.so, this));
						r.push("</div>")
					}
					if (this.id != undefined) {
						id = this.id
					}
				})
			} else {
				if (nm) {
					r.push(ui.g.header(t, a));
					$.each(a.r, function() {
						r.push('<div class="play-wrapper ');
						r.push(gameType);
						r.push('"><div class="label">');
						if (this.lb.length > 0) {
							r.push(u.label("label", "R" + this.lb))
						}
						r.push("</div>");
						r.push('<div class="ball ball-');
						r.push(a.mx);
						r.push('"><ul>');
						for (var e = this.mn; e <= this.mx; e++) {
							r.push('<li><a class="number number-');
							r.push(e);
							r.push('">');
							r.push(e);
							r.push("</a></li>")
						}
						r.push("</ul></div>");
						r.push(ui.g._buildSelectOptionMenu(a.so, this));
						r.push("</div>");
						if (this.id != undefined) {
							id = this.id
						}
					});
					if (a.cd == "7" && gameType == "KT") {
						r.push('<ul id="autoSelKT7" class="autoSelKT7">');
						r.push('<li val="bSNum" class="btn sNum number">小</li>');
						r.push('<li val="bONum" class="btn oNum number">奇</li>');
						r.push('<li val="bENum" class="btn eNum number">偶</li>');
						r.push('<li val="bBNum" class="btn bNum number">大</li>');
						r.push('<li val="bRNum" class="btn rNum number">清</li></ul>')
					}
				} else {
					$.each(a.r, function() {
						r.push('<div class="play-wrapper ');
						r.push(gameType);
						r.push('"><div class="label">');
						if (this.lb.length > 0) {
							r.push(u.label("label", "R" + this.lb))
						}
						r.push("</div>");
						r.push('<div class="button button-');
						r.push(a.mx);
						r.push('"><ul>');
						for (var e = this.mn; e <= this.mx; e++) {
							r.push('<li><a class="number">');
							r.push(u.label("text", "T" + e));
							r.push("</a></li>")
						}
						r.push("</ul></div>");
						r.push(ui.g._buildSelectOptionMenu(a.so, this));
						r.push("</div>");
						if (this.id != undefined) {
							id = this.id
						}
					})
				}
			}
			$("#play-normal").html(r.join(""));
			$("#play").attr({
				p: a.cd,
				i: id
			});
			ui.g.bindHeader(t);
			if (a.so != undefined && a.so == 1) {
				$("#play .option a").click(function() {
					var f = $(this),
						e = f.closest(".play-wrapper");
					e.find("a").removeClass("selected");
					sn = ui.g.selectOption(f.attr("val"));
					$.each(sn, function() {
						e.find(".number-" + this).addClass("selected")
					});
					ui.g.summary()
				})
			}
			if (gameType == "KT") {
				ui.g.customSelK3(a.cd)
			}
			ui.g.bindNumber(ss)
		}
		if (a.me) {
			$("#play").attr({
				p: a.cd,
				i: id
			});
			ui.g._bindAnyXEvent(a);
			$("#play-manual-example").html(u.label("example", b.g + ui.g.mexample(b)))
		}
		ui.g.clear();
		(a.ne) ? $("#game-mode").find("a").first().click() : $("#game-mode").find("a").last().click();
		$(".gooey-upper").gooeymenu({
			style: "circle",
			horizontal: {
				menuItemPosition: "glue"
			},
			vertical: {
				menuItemPosition: "spaced",
				direction: "up"
			},
			circle: {
				radius: 25
			},
			margin: "small",
			bounce: true,
			bounceLength: "small",
			transitionStep: 90,
			open: function() {
				$(".gooey-upper input:checked").parent().find(".open-button").trigger("click")
			}
		});
		$(document).on("click", function(h) {
			var f = h.target;
			if (!$(f).parents().hasClass("navimenu")) {
				$(".gooey-upper input:checked").parent().find(".open-button").trigger("click")
			}
		})
	},
	_buildSelectOptionMenu: function(b, e) {
		var a = [];
		if (b != undefined && b == 1) {
			a.push('<div class="option">');
			a.push('<div class="option-wrapper">');
			a.push('<ul><li><a val="a">全</a></li><li><a val="o">奇</a></li><li><a val="e">偶</a></li></ul>');
			a.push('<ul><li><a val="b">大</a></li><li><a val="s">小</a></li><li><a val="c">清</a></li></ul>');
			a.push("</div>");
			a.push("</div>")
		}
		return a.join("")
	},
	_bindAnyXEvent: function(b) {
		var a = $("#autoSelManSSC");
		a.find("input").prop("checked", false);
		a.find(".cBox i").removeClass("checked");
		if ((b.cd == "x" || b.cd == "y" || b.cd == "z" || b.cd == "Y") && gameType == "SSC") {
			a.show()
		} else {
			a.hide()
		}
		a.find("input").off("click").click(function() {
			if (a.find('input[type="checkbox"]:checked').length < 1) {
				$(this).prop("checked", true)
			}
			if ($(this).is(":checked")) {
				$(this).parents(".cBox").find("i").addClass("checked")
			} else {
				$(this).parents(".cBox").find("i").removeClass("checked")
			}
		});
		if (b.cd == "x") {
			a.find("li:nth-last-child(-n+1) input").trigger("click")
		} else {
			if (b.cd == "y") {
				a.find("li:nth-last-child(-n+2) input").trigger("click")
			} else {
				if (b.cd == "z") {
					a.find("li:nth-last-child(-n+3) input").trigger("click")
				} else {
					if (b.cd == "Y") {
						a.find("li:nth-last-child(-n+4) input").trigger("click")
					}
				}
			}
		}
	},
	bindNumber: function(a) {
		$("#play .number").click(function() {
			var e = $(this),
				b = e.closest(".play-wrapper");
			if (a) {
				b.find(".number").removeClass("selected");
				e.addClass("selected")
			} else {
				(e.hasClass("selected")) ? e.removeClass("selected") : e.addClass("selected")
			}
			ui.g.summary()
		})
	},
	clear: function() {
		$(".number").removeClass("selected");
		$("#play-order-manual").val("");
		$("#lot-sum").text("0");
		$("#play-prizeschedule, #play-price").text("0.00");
		$("#play-prizeschedule-wrapper").hide();
		$("#debug-lot").text("0");
		$("#debug-amount, #debug-prizeschedule").text("0.00");
		ui.g.setPrize()
	},
	summary: function() {
		var h = c.m,
			f = $("#play"),
			a = f.attr("p"),
			q = f.attr("i"),
			v = g.play(c.cp.play, a),
			j = ui.g.mixMode(v.t),
			x = ui.g.numberMode(v.t),
			k = ui.g.groupMode(v.t),
			e = ui.g.prizeOverride(a),
			b, w;
		if (j) {
			b = ui.g.numbers(v, j, x, k, f.find(".play-wrapper:visible"));
			w = ui.g.nsum((q.length == 0) ? a : q, b.n, h)
		} else {
			b = ui.g.numbers(v, j, x, k, f.find(".play-wrapper:visible"));
			w = ui.g.nsum((q.length == 0) ? a : q, b.n, h)
		}
		$("#lot-sum, #debug-lot").text(w.b);
		$("#play-price, #debug-amount").text(w.t);
		if (w.p == -1) {
			if (e > 0) {
				$("#play-prizeschedule-wrapper").show();
				$("#play-prizeschedule-label").text(l.sys.singlePrize);
				$("#play-prizeschedule, #debug-prizeschedule").text(u.currency(e))
			} else {
				$("#play-prizeschedule-wrapper").hide();
				$("#play-prizeschedule, #debug-prizeschedule").text("-")
			}
		} else {
			$("#play-prizeschedule-wrapper").show();
			$("#play-prizeschedule-label").text(l.sys.prize);
			$("#play-prizeschedule, #debug-prizeschedule").text(u.currency(w.p))
		}
		if (parseFloat(w.p) == 0) {
			ui.g.setPrize()
		}
	},
	numbers: function(m, f, x, h, p, a) {
		var k = [],
			e = [],
			b = [],
			j = 0,
			q = true;
		$.each(p, function() {
			e = [];
			k = $(this).find(".selected");
			if (f) {
				$.each(k, function() {
					e.push($(this).text())
				})
			} else {
				$.each(k, function() {
					e.push($(this).text())
				});
				if (h) {
					if (e.length > 0) {
						j++
					}
				} else {
					if (e.length < m.mn) {
						q = false;
						return false
					}
				}
			}
			b.push(e)
		});
		if (f) {
			var w = [];
			$.each(b, function() {
				if (this.length > 0) {
					$.each(this, function() {
						w.push(this)
					})
				}
			});
			b = w;
			if (b.length == 0) {
				q = false
			}
		} else {
			if (h && j == 0) {
				q = false
			}
		}
		b = (ui.o.multiLine) ? ui.o.multiLine(b, m.cd, a) : b;
		return {
			n: b,
			v: q
		}
	},
	setPrize: function() {
		var h = $("#play"),
			f = h.attr("p"),
			e = h.attr("i"),
			b = ui.g.prizeOverride(f),
			a = ui.g.prize((e.length == 0) ? f : e);
		if (a == -1) {
			if (b > 0) {
				$("#play-prizeschedule-wrapper").show();
				$("#play-prizeschedule-label").text(l.sys.singlePrize);
				$("#play-prizeschedule, #debug-prizeschedule").text(u.currency(b))
			} else {
				$("#play-prizeschedule-wrapper").hide();
				$("#play-prizeschedule, #debug-prizeschedule").text("-")
			}
		} else {
			$("#play-prizeschedule-wrapper").show();
			$("#play-prizeschedule-label").text(l.sys.prize);
			$("#play-prizeschedule, #debug-prizeschedule").text(u.currency(a))
		}
	},
	normal: function(a) {
		if ($("#debug-lot").text() != "0") {
			var f = $("#play"),
				b = f.attr("p"),
				k = f.attr("i"),
				m = g.play(c.cp.play, b),
				h = ui.g.mixMode(m.t),
				z = ui.g.numberMode(m.t),
				j = ui.g.groupMode(m.t),
				e = [],
				y = [],
				x = (m.cd == "+" && u.qs("t") == "SSC") ? true : false;
			if (x) {
				f.find(".play-wrapper:visible").each(function(n) {
					y.push(ui.g.numbers(m, h, z, j, $(this), n));
					e.v = true
				})
			} else {
				e = ui.g.numbers(m, h, z, j, f.find(".play-wrapper:visible"))
			}
			if (!e.v) {
				u.alert(l.g.min.replace("{0}", m.mn))
			} else {
				if (x) {
					var v = [];
					$.each(y, function() {
						var n = ui.g.format(m, j, this.n).o.length;
						if (n > 0) {
							v.push(ui.g.format(m, j, this.n))
						}
					});
					var w = [];
					$.each(v, function() {
						var n = ui.g.nsum(m.cd, this, c.m);
						w.push({
							n: this,
							t: n.b,
							c: n.t,
							p: n.p
						})
					});
					$(document).trigger((a) ? "OrderQuick" : "Order", {
						t: (k.length == 0) ? $("#play-name-title h1").text() : u.label("alt_play", "G" + k),
						p: (k.length == 0) ? b : k,
						o: w
					})
				} else {
					e = ui.g.format(m, j, e.n);
					$(document).trigger((a) ? "OrderQuick" : "Order", {
						t: (k.length == 0) ? $("#play-name-title h1").text() : u.label("alt_play", "G" + k),
						p: (k.length == 0) ? b : k,
						o: [{
							n: e,
							t: $("#debug-lot").text(),
							c: $("#debug-amount").text(),
							p: $("#debug-prizeschedule").text()
						}]
					})
				}
				if (!a) {
					ui.g.clear()
				}
			}
		} else {
			u.alert(l.o.empty)
		}
	},
	manual: function(a) {
		var j = c.m,
			h = $("#play"),
			b = h.attr("p"),
			w = h.attr("i"),
			A = g.play(c.cp.play, b),
			v = ui.g.groupMode(A.t),
			C = $("#play-order-manual"),
			z = (ui.o.processManualOnlyN) ? ui.o.processManualOnlyN($.trim(C.val()), A.cd) : ui.g.mparse($.trim(C.val())),
			y = [],
			f = [],
			k = [];
		if ($.trim(C.val()).length > 0) {
			ui.o.toggleCart(true);
			if (z.length > s.g.mlimit) {
				u.progress(true);
				for (var B = 0, x = z.length; B < x; B += s.g.mbatch) {
					k.push(z.slice(B, B + s.g.mbatch))
				}
				ui.g.processManualBatch(k, j, b, w, A, v, y, f, 0)
			} else {
				ui.g.processManual(z, j, b, w, A, v, y, f, 0);
				ui.o.orderManual(f);
				ui.g.cleanUpManual(C, y)
			}
		} else {
			u.alert(l.g.incorrect)
		}
	},
	processManual: function(y, k, f, q, A, n, x, h, z) {
		var b = z,
			B = y[b],
			v = ui.g.mprocess(A, ui.g.msplit(((ui.o.processManualOpt) ? ui.o.processManualOpt(B, f) : B), f)),
			w = ui.g.msum(f, v, k),
			j = (ui.o.manualOverride) ? ui.o.manualOverride(f) : false;
		if (w.b > 0 && w.t > 0) {
			var C = [];
			$.each(v, function() {
				C.push([this])
			});
			C = ui.g.munprocess(A, C);
			C = ui.g.format(A, n, C);
			h.push({
				t: (q.length == 0) ? $("#play-name-title h1").text() + ((j) ? j[1] : "") : u.label("alt_play", "G" + q),
				p: (j) ? j[0] : (q.length == 0) ? f : q,
				o: [{
					n: C,
					t: w.b,
					c: w.t,
					p: (parseFloat(w.p) == -1) ? "-" : w.p
				}]
			})
		} else {
			x.push(B)
		}
		b++;
		if (b < y.length) {
			ui.g.processManual(y, k, f, q, A, n, x, h, b)
		}
	},
	processManualBatch: function(v, j, f, n, x, k, q, h, w) {
		var b = w,
			y = v[b];
		$("#progress").find("p").text(l.g.mprocess.replace("{0}", Math.ceil(b / v.length * 100)));
		ui.g.processManual(y, j, f, n, x, k, q, h, 0);
		b++;
		if (v.length == b) {
			ui.o.orderManual(h);
			ui.g.cleanUpManual($("#play-order-manual"), q)
		} else {
			setTimeout(function() {
				ui.g.processManualBatch(v, j, f, n, x, k, q, h, b)
			}, 0)
		}
	},
	cleanUpManual: function(a, b) {
		$(document).trigger("OrderUpdate");
		ui.g.clear();
		a.val("");
		u.progress(false);
		if (b.length > 0) {
			a.val(ui.g.mjoin(b));
			u.alert(l.g.incorrect);
			setTimeout(function() {
				$("#play-order-confirm").hide();
				$("#play-order-bet").show()
			}, 200)
		}
	},
	format: function(b, f, m) {
		var n = [],
			a = 0,
			j = ui.g.mixMode(b.t),
			e = {
				o: "",
				d: ""
			};
		if (j) {
			var h = [];
			$.each(m, function() {
				h.push(ui.g.replace(this))
			});
			e.o = $.trim(h.join(""));
			e.d = "[" + $.trim(m.join(",")) + "]"
		} else {
			if (b.mx > 9 || !ui.g.numberMode(b.t)) {
				var h = [];
				$.each(m, function() {
					h = [];
					$.each(this, function() {
						h.push(ui.g.replace(this))
					});
					n.push(h)
				})
			} else {
				n = m
			}
			if (f) {
				if (b.cd == "+" && u.qs("t").toUpperCase() == "SSC") {
					$.each(m, function(k) {
						if (this.length > 0) {
							e.o += (a == 0) ? $.trim(n[k].join("")) : "," + $.trim(n[k].join(""));
							e.d += (a == 0) ? "[" + $.trim(this.join(",")) + "]" : " [" + $.trim(this.join(",")) + "]";
							a++
						}
					})
				} else {
					$.each(m, function(k) {
						if (this.length > 0) {
							e.o += $.trim(n[k].join(""));
							e.d += (a == 0) ? $.trim(this.join(",")) : "," + $.trim(this.join(","));
							a++
						}
					});
					e.d = "[" + $.trim(e.d) + "]"
				}
			} else {
				$.each(m, function(k) {
					e.o += (a == 0) ? $.trim(n[k].join("")) : "," + $.trim(n[k].join(""));
					e.d += (a == 0) ? "[" + $.trim(this.join(",")) + "]" : " [" + $.trim(this.join(",")) + "]";
					a++
				})
			}
		}
		return e
	}
};
u.ns("ui.o");
$(function() {
	ui.o.init()
});
ui.o = {
	cache: [],
	maxRow: 1000,
	zipThreshold: 50000,
	maxLength: 1000008,
	init: function() {
		$(document).on("Ready", function(b, a) {
			u.positiveIntOnly($("#order-multiplier"), "1", function() {
				ui.o._updateSummary(false)
			});
			u.positiveIntOnly($("#order-normal-multiplier"), "1", function() {
				$("#order-multiplier").val($("#order-normal-multiplier").val());
				ui.o._updateSummary(false)
			});
			$("#order-clear").click(function() {
				ui.o.clear()
			});
			$("#order-cnos").click(function() {
				if (!$(this).hasClass("disabled")) {
					ui.cno.cno()
				}
			});
			$("#order-confirm").click(function() {
				if (!$(this).hasClass("disabled")) {
					ui.o.submit(false)
				}
			});
			$("#order-cno-confirm").click(function() {
				if (!$(this).hasClass("disabled")) {
					ui.cno.isSummary = true;
					u.toggle($("#order-cno"), "#order-cno-summary", "#order-cno-setting")
				}
			});
			$("#order-cno-back").click(function() {
				ui.cno.isSummary = false;
				u.toggle($("#order-cno"), "#order-cno-setting", "#order-cno-summary")
			});
			$(".ribbon a, .ribbon-close").click(function() {
				$(".ribbon").fadeOut();
				$("#order-confirm, #order-cnos").removeClass("disabled")
			});
			$("#order-normal-print, #order-cno-print").click(function() {
				var e = $(this).closest(".order-panel").find("[class^=order-][class$=-number] span").attr("val");
				(u.isMember(c.m)) ? u.popup("print/print.html?id=" + e + "&g=" + c.g.cd + "&t=" + c.g.t.toLowerCase(), 6, 450, 450, 0, 1, 0) : u.login(l.sys.login)
			})
		});
		$(document).on("Order", function(b, a) {
			ui.o.toggleCart(true);
			ui.o.orderNormal(a)
		});
		$(document).on("OrderQuick", function(b, a) {
			ui.o.orderNormal(a);
			ui.o.submit(true)
		});
		$(document).on("OrderUpdate", function(b, a) {
			ui.o._updateSummary(false)
		});
		$(document).on("PayoutUnitSaved", function(b, a) {
			ui.o._updatePayoutUnit()
		});
		$(document).on("OrderNormalSuccess", function(f, b) {
			var h = b.d;
			$("#order-normal-number").text(h[0]).attr("val", h[4]);
			$("#order-normal-payable").text(u.currency(h[1]));
			$("#order-normal-rebate").text(u.currency(h[2]));
			$("#order-normal-amount").text(u.currency(h[3]));
			$("#order-normal-clear").val("1");
			var a = b.dc;
			a.find(".v-m-w p").html(l.o.success).removeClass("rt");
			u.toggle(a, ".order-step-2", ".order-step-1");
			u.toggle(a, ".order-step-2", ".order-progress")
		});
		$(document).on("OrderError", function(b, a) {
			u.toggle(a.dc, ".order-step-1", ".order-step-2, .order-progress");
			a.dc.find(".v-m-w p").html(u.translateError(a.c))
		});
		$(document).on("SaleStopped", function(b, a) {
			var f = a.d;
			ui.o.blockOrder(f);
			if ($("#order-normal-number").text() == "-") {
				$("#order-normal-issue").text(f[1])
			}
		})
	},
	toggleCart: function(a) {
		$("#list-cart-menu").click();
		$(document).trigger("OrderCartUpdated", a)
	},
	clear: function() {
		ui.o.cache = [];
		$("#list-cart-row ul").empty();
		$(".order-total-lot, #debug-total-lot, #debug-total-multiplier").text("0");
		$(".order-total-rebate, .order-total-amount, #debug-total-amount, #debug-total-rebate, #debug-total-prizeschedule, #debug-total-payable").text("0.00");
		ui.o.toggleCart(false)
	},
	orderNormal: function(b) {
		var a = _.uniqueId("o");
		$.each(b.o, function() {
			ui.o.cache.push({
				id: a,
				cd: b.p,
				n: this.n.o,
				lot: this.t,
				prize: this.p,
				price: this.c
			});
			$("#list-cart-row ul").append(ui.o._orderRow(b, this, a))
		});
		ui.o._bindOrderRowEvent();
		ui.o._updateSummary(false)
	},
	orderManual: function(k) {
		var f = [],
			p = $("#list-cart-row ul"),
			m = p.html(),
			h;
		for (var e = 0; e < k.length; e++) {
			h = k[e];
			for (var b = 0; b < h.o.length; b++) {
				var a = _.uniqueId("o");
				ui.o.cache.push({
					id: a,
					cd: h.p,
					n: h.o[b].n.o,
					lot: h.o[b].t,
					prize: h.o[b].p,
					price: h.o[b].c
				});
				if (e < ui.o.maxRow) {
					f.push(ui.o._orderRow(h, h.o[b], a))
				}
			}
		}
		p.empty().html(m + f.join(""));
		ui.o._bindOrderRowEvent()
	},
	_bindOrderRowEvent: function() {
		$("#list-cart-row ul").find("a").click(function() {
			var a = $(this).closest("li").attr("id");
			ui.o.cache = _.filter(ui.o.cache, function(b) {
				return b.id != a
			});
			$(this).closest("li").remove();
			ui.o._updateSummary(false)
		})
	},
	_orderRow: function(f, e, a) {
		var b = [];
		b.push('<li id="');
		b.push(a);
		b.push('" cd="');
		b.push(f.p);
		b.push('" n="');
		b.push(e.n.o);
		b.push('" class="tooltip"><div class="col-4">&nbsp;</div><div class="col-28">');
		b.push(f.t);
		b.push('</div><div class="col-39 ellipsis">');
		b.push(e.n.d);
		b.push('</div><div class="order-row-price col-17 right">');
		b.push(e.c);
		b.push('</div><div class="order-row-lot col-10 right hidden">');
		b.push(e.t);
		b.push('</div><div class="order-row-prizeschedule col-15 right hidden">');
		b.push(e.p);
		b.push('</div><div class="col-10 right"><a href="#" class="remove"></a></div>');
		b.push('<div class="content">');
		b.push('<div><span class="label">投注内容</span><span class="text">');
		b.push(e.n.d);
		b.push('</span></div><div><span class="label">注数</span><span class="text currency">');
		b.push(e.t);
		b.push("</span></div>");
		b.push('<div><span class="label">最高奖金</span><span class="text currency order-row-prizeschedule">');
		b.push(e.p);
		b.push("</span></div></div>");
		return b.join("")
	},
	calculate: function(n, b, f) {
		var e = c.m,
			a = u.floatingPoint(e.g.r, false),
			q = u.floatingPoint(u.unit(e.u) / 100, false),
			h = 0,
			j = 0,
			k = 0,
			p = 0;
		if (b > 0 && n.length > 0) {
			n = parseInt(n);
			if (isNaN(n)) {
				n = 1
			}
			if (f != undefined && f != null) {
				if (f.val() != n) {
					f.val(n)
				}
			}
			h = a * q * n * b;
			h = parseFloat(u.decimal(u.floatingPoint(u.floatingPoint(h, true), true), 3));
			k = u.floatingPoint(h, false);
			j = n * b * u.unit(e.u);
			p = u.floatingPoint(u.floatingPoint(j, false) - k, true);
			k = u.floatingPoint(k, true)
		}
		return {
			t: j,
			p: p,
			r: k,
			b: n
		}
	},
	_updateSummary: function(p) {
		var e = c.m,
			b = $("#list-cart-row li"),
			h = 0,
			q = 0,
			f = 0,
			k = $("#order-multiplier"),
			j, a;
		$.each(ui.o.cache, function() {
			j = this;
			q += parseInt(j.lot);
			h = (j.prize == "-") ? 0 : parseFloat(j.prize);
			f += u.floatingPoint(parseFloat(h), false)
		});
		a = ui.o.calculate(k.val(), q, k);
		f = u.floatingPoint((f * a.b), true);
		if (a.t > s.o.limit && s.o.limit != 0) {
			if (!p) {
				u.alert(l.o.limit);
				setTimeout(function() {
					k.val("1");
					ui.o._updateSummary(true)
				}, 500)
			} else {
				ui.o.clear();
				ui.o._updateSummary(false)
			}
		} else {
			$(".order-total-lot").text(q);
			$(".order-total-amount").text(u.currency(a.t));
			$("#debug-total-multiplier").text(a.b);
			$("#debug-total-lot").text(q);
			$("#debug-total-amount").text(u.currency(a.t));
			$("#debug-total-rebate").text(u.currency(a.r));
			$("#debug-total-payable").text(u.currency(a.p));
			$("#debug-total-prizeschedule").text(u.currency(f));
			$("#order-normal-multiplier").val(k.val());
			$("#order-normal-lot").text(q);
			$("#order-normal-amount").text(u.currency(a.t));
			$("#order-normal-rebate").text(u.currency(a.r));
			$("#order-normal-payable").text(u.currency(a.p))
		}
		if (a.p == 0 && b.length == 0) {
			ui.o.toggleCart(false)
		}
	},
	orderDetail: function(m, a) {
		var k = [],
			j = "",
			f, h, b = [];
		$.each(ui.o.cache, function() {
			f = this;
			h = _.findWhere(k, {
				cd: f.cd
			});
			(h == undefined) ? k.push({
				cd: f.cd,
				n: [f.n]
			}) : h.n.push(f.n)
		});
		j = ui.o.cache.length.toString() + "=";
		$.each(k, function(e) {
			j += this.cd + "" + ((ui.o.manualSp) ? ui.o.manualSp(this.n, this.cd).join(";") : this.n.join(";")) + "."
		});
		b.push(c.m.g.p);
		b.push(parseInt(c.m.u));
		b.push(j);
		b.push($("#game-issue").attr("i"));
		b.push(m);
		b.push(($.trim($("#order-multiplier").val()).length == 0) ? 1 : parseInt($.trim($("#order-multiplier").val())));
		b.push(a);
		b.push(0);
		b.push(c.g.id);
		return b
	},
	submit: function(b) {
		if (!u.isMember(c.m)) {
			u.login(l.sys.login);
			return
		}
		var e = $("#list-cart-row li"),
			a = $("#order-normal-clear");
		if (e.length <= 0) {
			u.alert(l.o.empty);
			return
		}
		a.val("");
		$("#order-normal-game").text(u.label("game", c.g.cd));
		$("#order-normal-number").text("-");
		$("#order-normal-issue").text($("#game-issue").text());
		$(".order-dialog-message").text(ui.o.disclaimer(e) || "");
		$(".ribbon").fadeOut();
		ui.o.confirm("normal", function(f) {
			var j = ui.o.orderDetail(1, 0),
				h = $("#order-normal-issue").text();
			if (j[2].length > ui.o.maxLength) {
				alert("订单长度超过限制，请减少注数！");
				return
			}
			j.push([j[5]]);
			u.toggle(f, ".order-progress", ".order-step-1");
			u.toggle(f, ".order-progress", ".order-step-2");
			d.o.submit(j, function(m) {
				var k = {
					dc: f,
					d: m,
					g: c.g.id,
					s: h
				};
				$(document).trigger("OrderNormalSuccess", k);
				$(document).trigger("OrderSuccess", k)
			}, function(k) {
				$(document).trigger("OrderError", {
					dc: f,
					c: k
				})
			});
			if (c.sync) {
				d.a.save({
					u: c.m.u,
					p: c.m.g.p
				});
				c.sync = false
			}
		}, function() {
			if (a.val().length > 0 || b) {
				ui.o.clear();
				ui.o.toggleCart(false)
			}
		});
		$("#order-normal-cancel").off("click").click(function() {
			if (b) {
				ui.o.clear()
			}
			$(".c-v-m").click()
		})
	},
	_updatePayoutUnit: function() {
		$.each($("#list-cart-row li"), function() {
			var e = $(this),
				f = e.attr("cd"),
				b = ui.o.prizeDisplayOverride(f),
				a = (b > 0) ? -1 : ui.o.win(e.attr("cd"), e.attr("n").split(","));
			e.find(".order-row-price").text(u.currency(parseInt(e.find(".order-row-lot").text()) * u.unit(c.m.u)));
			e.find(".order-row-prizeschedule").text((a > 0) ? u.currency(a) : "-")
		});
		$.each(ui.o.cache, function() {
			var e = this.cd,
				b = ui.o.prizeDisplayOverride(e),
				a = (b > 0) ? -1 : ui.o.win(this.cd, this.n.split(","));
			this.price = u.currency(parseInt(this.lot) * u.unit(c.m.u));
			this.prize = (a > 0) ? u.currency(a) : "-"
		});
		ui.o._updateSummary(false)
	},
	confirm: function(h, b, j) {
		var f = "#order-" + h,
			a = f + "-yes",
			k = f + "-close";
		var e = $(f);
		e.find(".v-m-w p").html("");
		u.toggle(e, ".order-step-1", ".order-step-2");
		u.toggle(e, ".order-step-1", ".order-progress");
		e.reveal({
			closeonbackgroundclick: false,
			disableClose: true
		});
		$(a).off("click").click(function() {
			b(e)
		});
		$(k).off("click").click(function() {
			j();
			$(".c-v-m").click()
		})
	},
	blockOrder: function(a) {
		$(".ribbon p").html(l.g.close.replace("{0}", $("#game-issue").text()).replace("{1}", (a[1] == undefined || a[1].length == 0) ? "- - -" : a[1]));
		$(".order-panel .ribbon p").html(l.g.close2.replace("{0}", $("#game-issue").text()).replace("{1}", (a[1] == undefined || a[1].length == 0) ? "- - -" : a[1]));
		$(".ribbon").fadeIn();
		setTimeout(function() {
			$(".ribbon-close").trigger("click")
		}, 3000);
		$("#order-confirm, #order-cnos").addClass("disabled")
	}
};
u.ns("ui.p");
$(function() {
	ui.p.init()
});
ui.p = {
	init: function() {
		$(document).on("MemberReady", function(b, a) {
			ui.p.payoutUnit(a);
			ui.p.bind()
		});
		$(document).on("PayoutUnitChanged", function(b, a) {
			c.m.g.p = a.g.p;
			c.m.g.r = a.g.r;
			c.m.u = a.u;
			if (u.isMember(c.m)) {
				c.sync = true
			}
			$(document).trigger("PayoutUnitSaved", a)
		});
		$(document).on("PayoutUnitSaved", function(b, a) {
			ui.p.payoutUnit(a)
		})
	},
	bind: function() {
		var a = c.m,
			b = $("#payout-option-slider"),
			f = a.g.pn,
			h = a.g.px,
			e = 2;
		b.noUiSlider({
			start: a.g.p,
			range: {
				min: f,
				max: h,
			},
			step: e
		}).on({
			set: function() {
				ui.p.payout($(this).val(), c.m)
			}
		}).val(a.g.p, {
			set: true
		});
		b.Link("lower").to($("#payout-option-rate"), function(j) {
			ui.p.payout(j, c.m)
		});
		$("#payout-option-decrease").click(function() {
			var j = parseInt(b.val()) - e;
			if (j >= f) {
				b.val(j, {
					set: true
				})
			}
		});
		$("#payout-option-increase").click(function() {
			var j = parseInt(b.val()) + e;
			if (j <= h) {
				b.val(j, {
					set: true
				})
			}
		});
		ui.p.unit(a.u);
		$("#payout-option-unit a").click(function() {
			ui.p.unit($(this).attr("val"))
		});
		$("#payout-option-a-yes").click(function() {
			$(document).trigger("PayoutUnitChanged", {
				g: {
					p: parseInt($("#payout-option-rate").val()),
					r: u.percentage(parseFloat($("#payout-option-percent").val()))
				},
				u: $("#payout-option-unit").find(".active").attr("val")
			});
			ui.p.close()
		});
		$("#payout-option-a-no").click(function() {
			b.val(c.m.g.p, {
				set: true
			});
			ui.p.unit(c.m.u);
			ui.p.close()
		});
		$("#play-payout, #play-unit").click(function() {
			$("#payout-option").reveal({
				closeonbackgroundclick: false,
				disableClose: true
			})
		})
	},
	payout: function(e, a) {
		if (!isNaN(e)) {
			var b = g.rebate(a.g.px, e);
			$("#payout-option-percent").val(u.percentage(b) + "%");
			$("#payout-option-rate").val(parseInt(e))
		}
	},
	unit: function(a) {
		$("#payout-option-unit a").removeClass("active");
		$("#payout-option-unit").find("#unit" + a).addClass("active")
	},
	payoutUnit: function(a) {
		var b = $("#play-unit").find("i");
		$("#play-payout").text(a.g.p + " / " + u.percentage(a.g.r) + "%");
		b.removeClass(function() {
			return (this.className.match(/i[0-9]+/g) || []).join(" ")
		});
		switch (u.label("ut", "unit" + a.u)) {
		case "元":
			b.addClass("i100");
			break;
		case "角":
			b.addClass("i10");
			break;
		case "分":
			b.addClass("i1");
			break;
		case "厘":
			b.addClass("i11");
			break
		}
	},
	close: function() {
		$(".c-v-m").click()
	}
};
u.ns("ui.i");
$(function() {
	ui.i.init()
});
ui.i = {
	timeout: null,
	init: function() {
		ui.i.resultPanel();
		$(document).on("ResultUpdated", function(b, a) {
			ui.i.stopSpin(a)
		});
		$(document).on("ResultPushed", function(b, a) {
			ui.i.stopSpin(a)
		});
		ui.i.issueRes.init()
	},
	register: function() {
		d.p.register(function(a) {
			$(document).trigger("ResultPushed", a)
		})
	},
	stopSpin: function(a) {
		if (!a.d) {
			return
		}
		ui.i.stopSpinExt(a, function(b) {
			ui.i.stopAnimation(b)
		});
		ui.i.countdown(a.d);
		ui.i.register()
	},
	countdown: function(e) {
		var h = _.uniqueId("issue-timer"),
			f = $(".issue-timer span"),
			a = u.qs("dm"),
			b = [];
		if (f != undefined) {
			f.countdown("pause");
			f.countdown("destroy");
			f.empty();
			f.remove()
		}
		b.push('<span id="');
		b.push(h);
		if (a == undefined || a.length == 0) {
			b.push('" class="transparent-text')
		} else {
			b.push('" class="white-text')
		}
		b.push('"></span>');
		$("#issue-timer").html(b.join(""));
		$("#" + h).countdown({
			until: e[3],
			format: "dHMS",
			compact: true,
			alwaysExpire: true,
			onExpiry: function() {
				$("#issue-number").text(e[4]).show();
				ui.i.startAnimation()
			}
		})
	},
	stopAnimation: function(f) {
		var e = f.d,
			b = $("#issue-result li.cryp"),
			a = 500;
		$("#issue-number").text(e[0]);
		clearInterval(ui.i.issueRes.intv);
		b.each(function(h) {
			var j = $(this);
			setTimeout(function() {
				j.find("span").text(ui.r.replace(e[1][h]));
				j.find("span").fadeIn("100");
				j.removeClass(ui.i.issueRes.rmvCls(j[0])).addClass(ui.i.issueRes.addCls(ui.r.replace(e[1][h])) + " pulse")
			}, (a += 100))
		});
		$(document).trigger("ResultUpdateCompleted", f)
	},
	startAnimation: function() {
		var a = $("#issue-result li.cryp");
		a.removeClass("pulse");
		ui.i.issueRes.intv = setInterval(function(e) {
			if (ui.i.issueRes.pureAnim != "") {
				var b = ui.i.issueRes.delay;
				a.find("span").text("");
				a.each(function() {
					var f = $(this);
					setTimeout(function() {
						f.removeClass(ui.i.issueRes.rmvCls(f[0])).addClass(ui.i.issueRes.pureAnim)
					}, b += 100)
				})
			} else {
				ui.i.issueRes.shuffle(ui.i.issueRes.coll);
				a.each(function(f) {
					var j = ui.i.issueRes.formula(f),
						h = $(this);
					h.find("span").text(j);
					h.removeClass(ui.i.issueRes.rmvCls(this)).addClass(ui.i.issueRes.addCls(j))
				})
			}
		}, ui.i.issueRes.delay)
	}
};
u.ns("ui.r");
$(function() {
	ui.r.init()
});
ui.r = {
	listLength: 15,
	init: function() {
		$(document).on("Ready", function(b, a) {
			$("#list-result li").html(ui.r.header());
			ui.r.refreshIssue(a, false);
			$("#list .list-link").click(function() {
				ui.r.toggle(a, $(this))
			}).first().trigger("click");
			$("#list-refresh").click(function() {
				($("#list").find(".active").attr("val") == "result") ? ui.r.refreshIssue(a, true) : ui.r.refreshBetHistory(a, true)
			})
		});
		$(document).on("ResultUpdateCompleted", function(b, a) {
			if (a.d != undefined) {
				ui.r.issueUpdated(a.d)
			}
		});
		$(document).on("OrderSuccess", function(b, a) {
			ui.r.betUpdated(a)
		})
	},
	toggle: function(e, f) {
		var a = f.attr("val"),
			b = $("#list");
		b.find(".list-link").removeClass("active");
		f.addClass("active");
		u.toggle(b, "#list-" + a, ".list-title");
		u.toggle(b, "#list-" + a + "-row", ".list-row");
		$("#list-refresh").show();
		switch (a) {
		case "order":
			ui.r.refreshBetHistory(e, false);
			break;
		case "result":
			ui.r.refreshIssue(e, false);
			break
		}
	},
	toggleProgress: function(a) {
		var b = $("#list");
		if (a) {
			b.find(".icons-refresh").hide();
			b.find(".progress").show()
		} else {
			b.find(".progress").hide();
			b.find(".icons-refresh").show()
		}
	},
	refreshBetHistory: function(b, a) {
		var e = $("#list-order-row ul");
		if (u.isMember(c.m)) {
			if (e.html().length == 0 || e.html().indexOf(l.sys.login) > 0 || a) {
				ui.r.toggleProgress(true);
				e.empty().html('<li class="col-100 center">' + l.sys.wait + "</li>");
				d.r.bet(b, function(h) {
					ui.r.toggleProgress(false);
					var f = [];
					if (h != undefined && h.length > 0) {
						$.each(h, function(k) {
							if (k < ui.r.listLength) {
								f.push('<li val="');
								f.push(this[5]);
								f.push('" cd="');
								f.push(this[0]);
								f.push('"><a><div class="col-1">&nbsp;</div><div class="col-26">');
								f.push(u.label("id", this[0]));
								f.push('</div><div class="col-32">');
								f.push(this[1]);
								f.push('</div><div class="col-17 left">');
								f.push(u.label("status", this[2]));
								f.push('</div><div class="col-20 right');
								var j = u.currency(this[4] - this[3]);
								if (this[2] == 0) {
									f.push(' white-text"> -.--')
								} else {
									if (this[2] == 1) {
										if (j - 0 >= 0) {
											f.push(' red-text">');
											f.push(j)
										} else {
											f.push(' green-text">');
											f.push(u.currency(this[3] - this[4]))
										}
									} else {
										if (this[2] == 2) {
											f.push(' green-text">');
											f.push(u.currency(this[3]))
										} else {
											f.push(' white-text">');
											f.push("0.000")
										}
									}
								}
								f.push('</div><div class="col-1 right"><div class="list-oa"><i class="icons icons-orderagian"></i><i class="icons orderagian-popup"></i></div></div>');
								f.push('<div class="col-1">&nbsp;</div></a></li>')
							} else {
								return false
							}
						})
					} else {
						f.push('<li class="col-100 center">');
						f.push(l.sys.record);
						f.push("</li>")
					}
					e.empty().html(f.join(""));
					if (h != undefined && h.length > 0) {
						e.find("li").click(function() {
							var j = g.group($(this).attr("cd"));
							(u.isMember(c.m)) ? u.popup("detail/detail.html?id=" + $(this).attr("val") + "&g=" + c.g.cd + "&t=" + j, 1, 803, 600, 0, 1, 0) : u.login(l.sys.login)
						})
					}
				}, function(f) {
					ui.r.toggleProgress(false);
					e.empty().html('<li class="col-100 center">' + u.translateError(f) + "</li>");
					if (f == "2" || f == "101" || f == "211") {
						u.login(l.sys.login)
					}
				})
			}
		} else {
			e.empty().html('<li class="col-100 center">' + l.sys.login + "</li>");
			u.login(l.sys.login)
		}
	},
	betUpdated: function(b) {
		var e = $("#list-order-row ul"),
			a = [];
		if (u.isMember(c.m)) {
			if (e.html().length > 0 && b != undefined) {
				if (e.html().indexOf(l.sys.record) > 0) {
					e.empty()
				}
				a.push('<li val="');
				a.push(b.d[4]);
				a.push('" cd="');
				a.push(b.g);
				a.push('"><a title="');
				a.push(l.r.view);
				a.push('"><div class="col-1">&nbsp;</div><div class="col-26">');
				a.push(u.label("id", b.g));
				a.push('</div><div class="col-32">');
				a.push(b.s);
				a.push('</div><div class="col-17 left">');
				a.push(u.label("status", 0));
				a.push('</div><div class="col-20 right">');
				a.push("-.--");
				a.push('</div><div class="col-1 right">');
				a.push('<div class="list-oa"><i class="icons icons-orderagian"></i><i class="icons orderagian-popup"></i></div>');
				a.push('</div><div class="col-1>&nbsp;</div></a></li>');
				e.prepend(a.join(""));
				e.find("li:gt(" + (ui.r.listLength - 1) + ")").remove();
				e.find("li:first").click(function() {
					var f = g.group(b.g);
					(u.isMember(c.m)) ? u.popup("detail/detail.html?id=" + b.d[4] + "&g=" + c.g.cd + "&t=" + f, 1, 803, 600, 0, 1, 0) : u.login(l.sys.login)
				})
			}
		}
	},
	refreshIssue: function(b, a) {
		var e = $("#list-result-row ul");
		if (e.html().length == 0 || a) {
			ui.r.toggleProgress(true);
			e.empty().html('<li class="col-100 center">' + l.sys.wait + "</li>");
			d.r.issue(b, function(h) {
				ui.r.toggleProgress(false);
				ui.r.renderIssue(e, h);
				if (!a && h != undefined) {
					var f = [];
					if (h.length > 0) {
						f.push(h[0][0]);
						f.push(h[0][1]);
						f.push(h[0][2]);
						f.push(h[0][3]);
						f.push(h[0][4])
					}
					$(document).trigger("ResultUpdated", {
						d: f
					})
				}
			}, function(f) {
				ui.r.toggleProgress(false);
				e.empty().html('<li class="col-100 center">' + u.translateError(f) + "</li>");
				if (f == "2" || f == "101" || f == "211") {
					u.login(l.sys.login)
				}
			})
		}
	},
	renderIssue: function(e, b) {
		var a = [];
		if (b != undefined && b.length > 0 && b[0][0] != null && b[0][0].length > 0 && b[0][1] != null && b[0][1].length > 0) {
			$.each(b, function(f) {
				if (f < ui.r.listLength) {
					a.push(ui.r.issueRow(this, (f == 0)))
				} else {
					return false
				}
			})
		} else {
			a.push('<li class="col-100 center">');
			a.push(l.sys.record);
			a.push("</li>")
		}
		e.empty().html(a.join(""))
	},
	issueUpdated: function(e) {
		var h = $("#list-result-row ul"),
			a = h.find(".highlight"),
			f = false;
		if (e[1].length > 0) {
			if (a != undefined && a.length > 0) {
				var b = parseInt(a.attr("seq"));
				if (b == NaN || (b + 1) != e[2]) {
					f = true
				}
			}
			if (f) {
				ui.r.refreshIssue(c.g.cd, true)
			} else {
				if (h.html().indexOf(l.sys.record) > 0) {
					h.empty()
				}
				h.find("li").removeClass("highlight");
				h.prepend(ui.r.issueRow(e, true));
				h.find("li:gt(" + (ui.r.listLength - 1) + ")").remove()
			}
		}
	}
};
u.ns("ui.balance");
$(function() {
	ui.balance.init()
});
ui.balance = (function() {
	var a = true;

	function b() {
		if (document.cookie.indexOf("sb=") < 0) {
			document.cookie = "sb=true;path=/"
		}
		var h;
		var f = document.cookie.split(";");
		$(f).each(function(j, k) {
			if ($.trim(k) && k.indexOf("sb=") >= 0) {
				h = k.split("sb=")[1];
				return false
			}
		});
		if (!h) {
			h = "true"
		}
		a = (h == "true");
		return a
	}
	function e(f, h) {
		console.info("show bal increase animation...")
	}
	return {
		init: function() {
			var f = this;
			b();
			$("#toggleBal").click(function() {
				if (a) {
					a = false;
					$("#balance").text("****");
					$(this).addClass("icons-eye-c")
				} else {
					a = true;
					f.refreshBal()
				}
				document.cookie = "sb=" + a + ";path=/"
			});
			$("#refreshBal").click(function() {
				f.refreshBal()
			});
			$(document).on("MemberReady", function(h) {
				if (a) {
					$("#balance").text(u.currency(c.m.b));
					$("#toggleBal").removeClass("icons-eye-c")
				} else {
					$("#balance").text("****");
					$("#toggleBal").addClass("icons-eye-c")
				}
			});
			$(document).on("OrderSuccess", function(j, h) {
				f.refreshBal()
			});
			$(document).on("ResultUpdateCompleted", function() {
				setTimeout(function() {
					f.refreshBal()
				}, 1500)
			})
		},
		refreshBal: function() {
			if (!a) {
				return
			}
			$("#pBal .icons-refresh").hide();
			$("#pBal .progress").show();
			d.m.balance(function(f) {
				$("#pBal .progress").hide();
				$("#pBal .icons-refresh").show();
				if (f != undefined) {
					$("#balance").text(u.currency(f));
					if (f > c.m.b) {
						e(c.m.b, f)
					}
					c.m.b = f;
					$("#toggleBal").removeClass("icons-eye-c")
				}
			}, function(f) {
				$("#pBal .progress").hide();
				$("#pBal .icons-refresh").show();
				if (f == "2" || f == "101" || f == "211") {
					u.login(l.sys.login)
				} else {
					u.alert(u.translateError(f))
				}
			})
		}
	}
})();
u.ns("ui.stats");
$(function() {
	ui.stats.init()
});
ui.stats = (function() {
	var a = '<li><div class="col-12 right">@period</div><div class="col-28 right">@to</div><div class="col-28 right">@win</div><div class="col-28 right @color-text">@pnl</div><div class="col-4">&nbsp;</div></li>';
	return {
		init: function() {
			var b = this;
			$(document).on("MemberReady", function(f) {
				b.refreshStats();
				$("#stats-refresh").click(function() {
					b.refreshStats()
				})
			});
			$(document).on("ResultUpdateCompleted", function() {
				setTimeout(function() {}, 1500)
			})
		},
		refreshStats: function() {
			$("#list-stats .icons-refresh").hide();
			$("#list-stats .progress").show();
			$("#list-stats-row ul").html('<li class="col-100 center">' + l.sys.wait + "</li>");
			d.r.stats(function(n) {
				$("#list-stats .progress").hide();
				$("#list-stats .icons-refresh").show();
				if (n != undefined) {
					var b = [];
					for (var f in n) {
						if (n.hasOwnProperty(f)) {
							var h = n[f];
							var m = h[0];
							var e = h[1];
							var k = m + e;
							b.push([f + "天", m, k, e])
						}
					}
					var j = [];
					$(b).each(function(p, q) {
						var v = a.replace("@period", q[0]).replace("@to", u.currency(q[1])).replace("@win", u.currency(q[2])).replace("@pnl", u.currency(q[3])).replace("@color", q[3] >= 0 ? "red" : "green");
						j.push(v)
					});
					$("#list-stats-row ul").html(j.join(""))
				}
			}, function(b) {
				$("#list-stats .progress").hide();
				$("#list-stats .icons-refresh").show();
				if (b == "2" || b == "101" || b == "211") {
					u.login(l.sys.login)
				} else {
					u.alert(u.translateError(b))
				}
			})
		}
	}
})();
u.ns("ui.chart");
$(function() {
	ui.chart.init()
});
ui.chart = (function() {
	var x = 3;
	var n = 32;
	var y = 8;
	var k = "SSC";
	var m = "Comb36";
	var q = 0;
	var p = 4;
	var z = [];
	var v = {
		playSSC: "<option value='DragonTiger'>龙/虎</option><option value='BigSmall'>大/小</option><option value='OddEven'>单/双</option><option value='Comb36'>组三/组六</option>",
		play3DC: "<option value='BigSmall'>大/小</option><option value='OddEven'>单/双</option><option value='Comb36'>组三/组六</option>",
		playKT: "<option value='BigSmall'>大/小</option><option value='OddEven'>单/双</option>",
		play11X5: "<option value='OddEven'>单/双</option>",
		playPK10: "<option value='DragonTiger'>龙/虎</option><option value='BigSmall'>大/小</option><option value='OddEven'>单/双</option>",
		posComb36SSC: '<a class="active" p="0">前三</a><a p="1">中三</a><a p="2">后三</a>',
		posBigSmallSSC: '<a class="active" p="0">万位</a><a p="1">千位</a><a p="2">百位</a><a p="3">十位</a><a p="4">个位</a>',
		posBigSmall3DC: '<a class="active" p="0">百位</a><a p="1">十位</a><a p="2">个位</a>',
		posBigSmallPK10: '<a class="active" p="0">冠军</a><a p="1">亚军</a><a p="2">季军</a>',
		posOddEvenSSC: '<a class="active" p="0">万位</a><a p="1">千位</a><a p="2">百位</a><a p="3">十位</a><a p="4">个位</a>',
		posOddEven3DC: '<a class="active" p="0">百位</a><a p="1">十位</a><a p="2">个位</a>',
		posOddEvenPK10: '<a class="active" p="0">冠军</a><a p="1">亚军</a><a p="2">季军</a>',
		posDragonTigerSSC: '<a class="active" p="0" q="1">万千</a><a p="0" q="2">万百</a><a p="0" q="3">万十</a><a p="0" q="4">万个</a><a p="1" q="2">千百</a><a p="1" q="3">千十</a><a p="1" q="4">千个</a><a p="2" q="3">百十</a><a p="2" q="4">百个</a><a p="3" q="4">十个</a>',
		legendComb36: '<div>豹子<div class="circle circle-green"></div></div><div>组三<div class="circle circle-red"></div></div><div>组六<div class="circle circle-blue"></div></div>',
		legendBigSmall: '<div>大<div class="circle circle-red"></div></div><div>小<div class="circle circle-blue"></div></div>',
		legendOddEven: '<div>双<div class="circle circle-red"></div></div><div>单<div class="circle circle-blue"></div></div>',
		legendDragonTiger: '<div>和<div class="circle circle-green"></div></div><div>龙<div class="circle circle-red"></div></div><div>虎<div class="circle circle-blue"></div></div>',
		legendDragonTigerPK10: '</div><div>龙<div class="circle circle-red"></div></div><div>虎<div class="circle circle-blue"></div></div>',
		singleDataPoint: "第@seq期",
		multiDataPoint: "第@seq1到@seq2期"
	};
	v.playPL = v.play3DC;
	v.posBigSmallPL = v.posBigSmallSSC;
	v.posOddEven11X5 = v.posOddEvenPL = v.posOddEvenSSC;
	v.legendBigSmallPK10 = v.legendBigSmall;
	v.legendOddEvenPK10 = v.legendOddEven;
	var h = {
		OddEven: function(B, C) {
			var A = B[C].replace("a", "10").replace("b", "11");
			if (k == "KT") {
				A = parseInt(B[0]) + parseInt(B[1]) + parseInt(B[2])
			}
			if (A % 2 == 0) {
				return "E"
			}
			return "O"
		},
		BigSmall: function(B, C) {
			var A = B[C].replace("a", "10").replace("b", "11");
			if (k == "SSC" || k == "3DC" || k == "PL") {
				if (A <= 4) {
					return "S"
				}
				return "B"
			} else {
				if (k == "PK10") {
					if (A <= 5) {
						return "S"
					}
					return "B"
				} else {
					if (k == "KT") {
						A = parseInt(B[0]) + parseInt(B[1]) + parseInt(B[2]);
						if (A <= 10) {
							return "S"
						}
						return "B"
					}
				}
			}
		},
		DragonTiger: function(D, C, B) {
			var E = parseInt(D[C].replace("a", "10").replace("b", "11"));
			var A = parseInt(D[B].replace("a", "10").replace("b", "11"));
			if (E > A) {
				return "D"
			} else {
				if (E < A) {
					return "T"
				} else {
					return "H"
				}
			}
		},
		Comb36: function(B, C) {
			var A = B.substr(C, 3);
			if (A[0] == A[1] && A[1] == A[2]) {
				return "1"
			}
			if (A[0] != A[1] && A[0] != A[2] && A[1] != A[2]) {
				return "6"
			}
			return "3"
		}
	};

	function w(A, D, C, B) {
		return $(A).map(function(E, F) {
			return h[D](F[1], C, B)
		})
	}
	function j(D, C) {
		var B = C || "";
		var A = "green";
		if (D == "B" || D == "D" || D == "E" || D == "3") {
			A = "red"
		} else {
			if (D == "S" || D == "T" || D == "O" || D == "6") {
				A = "blue"
			}
		}
		return '<div class="circle circle-' + A + '">' + B + "</div>"
	}
	function f() {
		var A = [];
		for (var C = 0; C < y; C++) {
			A.push("<ul>");
			for (var B = 0; B < n; B++) {
				A.push("<li c=" + B + "," + C + "></li>")
			}
			A.push("</ul>")
		}
		$("#chart-panel").empty().html(A.join(""))
	}
	var e = false;

	function a(B) {
		if (e) {
			e = false
		} else {
			return
		}
		var A = setInterval(function() {
			B.fadeTo(300, 0.1).fadeTo(300, 1)
		}, 700);
		setTimeout(function() {
			clearInterval(A)
		}, 3500)
	}
	function b() {
		var D = 0;
		for (var C = n - 1; C >= 0; C--) {
			var A = $("#chart-panel li[c^='" + C + ",'] div").length;
			for (var G = A - 1; G >= 0; G--) {
				var E = $("#chart-panel li[c^='" + C + "," + G + "'] div");
				var B = E.html(),
					F;
				if (!B) {
					var F = v.singleDataPoint.replace("@seq", z[D][0]);
					D++
				} else {
					B = parseInt(B);
					var F = v.multiDataPoint.replace("@seq1", z[D + B - 1][0]).replace("@seq2", z[D][0]);
					D += B
				}
				E.attr("title", F)
			}
		}
	}
	return {
		init: function() {
			var A = this;
			k = u.qs("t");
			if (k == "JRZ") {
				$("#list-cart-row").show();
				$("#luzitu").hide();
				return
			}
			$(document).on("Ready", function(C, B) {
				A.renderMenu()
			});
			$(document).on("ResultUpdateCompleted", function() {
				setTimeout(function() {
					A.refreshData()
				}, 1500)
			})
		},
		renderMenu: function() {
			var B = this;
			var A = v["play" + k];
			$("#ddlPlay").html(A);
			$("#ddlPlay").on("change", function() {
				m = $(this).val();
				var C = v["legend" + m + (k == "PK10" ? "PK10" : "")];
				$("#lgdData").html(C);
				var D = v["pos" + m + k] || "";
				$("#selPos").html(D);
				$("#selPos a").on("click", function() {
					$("#selPos a").removeClass("active");
					q = $(this).addClass("active").attr("p");
					p = $(this).attr("q");
					B.renderData()
				});
				q = 0;
				if (k == "SSC") {
					p = 1
				} else {
					if (k == "PK10") {
						p = 9
					}
				}
				B.renderData()
			}).trigger("change");
			if (ui.r.chart()) {
				$("#chart").click(function() {
					u.popup("chart/chart.html?g=" + c.g.cd + "&t=" + u.qs("t"), 3, 1000, 600, 0, 1, 1)
				})
			} else {
				$("#chart").addClass("disabled")
			}
		},
		renderPanel: function() {
			var A = [];
			for (var C = 0; C < y; C++) {
				A.push("<ul>");
				for (var B = 0; B < n; B++) {
					A.push("<li c=" + B + "," + C + "></li>")
				}
				A.push("</ul>")
			}
			$("#chart-panel").empty().html(A.join(""))
		},
		refreshData: function() {
			var A = this;
			d.c.history({
				id: g.game(ui.c.game, u.qs("g")).id,
				t: x,
				lastIssue: $("#issue-number").html()
			}, function(B) {
				z = B.reverse();
				e = true;
				A.renderData()
			}, function(B) {
				u.alert(u.translateError(B))
			})
		},
		renderData: function() {
			var F = this;
			f();
			var D = w(z, m, q, p);
			var C = D[0],
				B = 0,
				E = [];
			$(D).each(function(G, H) {
				if (H == C) {
					B++
				} else {
					E.push({
						type: C,
						count: B
					});
					C = H;
					B = 1
				}
			});
			var A = n - 1;
			$(E).each(function(H, K) {
				var L = K.type;
				var G = K.count - y + 1;
				var J = j(L);
				for (var H = 0; H < K.count; H++) {
					$("#chart-panel li[c='" + A + "," + H + "']").html(J)
				}
				if (G > 1) {
					var I = j(L, G);
					$("#chart-panel li[c='" + A + "," + (y - 1) + "']").html(I)
				}
				A--;
				if (A < 0) {
					return false
				}
			});
			a($("li[c^='31,'] div:last"));
			b()
		}
	}
})();
u.ns("ui.a");
$(function() {
	ui.a.init()
});
ui.a = (function() {
	var f = 950;

	function h(j) {
		if (j != undefined) {
			u.progress(false);
			$("#main").show();
			$(document).trigger("Ready", c.cd);
			if (j.i.length > 0) {
				$(document).trigger("DrawReady", {
					issue: j.i
				})
			}
			if (j.m.m.n.length > 0) {
				c.m = j.m.m;
				$(document).trigger("MemberReady", c.m)
			}
		} else {
			$("#progress").find("p").html(l.sys.error);
			u.progress(true)
		}
	}
	function e(j) {
		if ((j == 100 || j == 101 || j == 1 || j == 2)) {
			u.progress(false);
			u.login(l.sys.login)
		} else {
			u.progress(true);
			$("#progress").find("p").html(u.translateError(j));
			if (j == 223) {
				$("#link-exit").attr("href", s.common.ssc + "DZFFC1&t=SSC&u=" + u.qs("u"))
			}
		}
	}
	function b(k, j) {
		c.cd = k;
		c.cp = j.cp;
		c.m = j.m;
		c.g = g.game(j.cp.game, k)
	}
	function a() {
		var j = screen.availHeight - (window.outerHeight - window.innerHeight);
		if (j <= 800) {
			$("body").addClass("zoom800")
		} else {
			if (j <= 960) {
				$("body").addClass("zoom960")
			} else {
				if (j <= 1024) {
					$("body").addClass("zoom1024")
				} else {
					if (j <= 1080) {
						$("body").addClass("zoom1080")
					} else {
						if (j <= 1200) {
							$("body").addClass("zoom1200")
						} else {
							if (j <= 1440) {
								$("body").addClass("zoom1440")
							} else {
								if (j >= 1800) {
									$("body").addClass("zoomMax")
								}
							}
						}
					}
				}
			}
		}
	}
	return {
		init: function() {
			a();
			u.decodePage();
			if (u.qs("dm")) {
				$("#debug").show()
			}
			var k = ui.a.gameCode();
			var j = d.a.config();
			if (g.game(j.cp.game, k) != undefined) {
				b(k, j);
				loadMember(h, e)
			} else {
				$("#main").addClass("error-main").html(l.sys.game).show()
			}
		}
	}
})();
u.ns("d.m");
d.m = {
	balance: function(b, a) {
		var e = g.id();
		u.get(s.web.svc + "loadconf.do?p=[" + e + ",0]&r=" + Math.random(), function(f) {
			var h = f[0];
			(h == 0) ? b(f[1][1][1]) : a(h)
		}, a)
	},
	logout: function(b, a) {
		u.get(s.web.svc + "logout.do?r=" + Math.random(), function(e) {
			var f = e[0];
			(f == 0) ? b() : a(f)
		}, a)
	}
};
u.ns("d.h");
d.h = {
	draw: function(b, e, a) {
		u.get(s.web.svc + "loadconf.do?p=[" + g.id() + "]&r=" + Math.random(), function(f) {
			var h = f[0];
			(h == 0) ? e(f[1][0]) : a(h)
		}, a)
	}
};
u.ns("d.o");
d.o = {
	issues: function(e, a) {
		if (s.debugMode) {
			var b = [
				["11438", "20170717-037"],
				["11439", "20170717-038"],
				["11440", "20170717-039"],
				["11441", "20170717-040"],
				["11442", "20170717-041"],
				["11443", "20170717-042"],
				["11444", "20170717-043"],
				["11445", "20170717-044"],
				["11446", "20170717-045"],
				["11447", "20170717-046"]
			];
			setTimeout(function() {
				e(b)
			}, 100)
		} else {
			u.get(s.web.svc + "loadissues.do?p=[" + g.id() + "]&r=" + Math.random(), function(f) {
				var h = f[0];
				(h == 0) ? e(f[1]) : a(h)
			}, a)
		}
	},
	submit: function(e, h, a) {
		var j = g.id(),
			f = [];
		f.push("p=" + e[0]);
		f.push("u=" + e[1]);
		f.push("s=" + e[3]);
		f.push("q=" + e[4]);
		f.push("m=" + e[5]);
		f.push("w=" + e[6]);
		f.push("b=" + e[7]);
		f.push("g=" + e[8]);
		f.push("c=[" + e[9].join(",") + "]");
		var b = e[2] && e[2].length > ui.o.zipThreshold;
		ui.o.startTime = new Date();
		u.post2(s.web.svc + "placeorder.do?" + f.join("&"), e[2], function(k) {
			if (b && console) {
				console.info("time spent=" + (new Date() - ui.o.startTime) / 1000 + "s")
			}
			var m = k[0];
			(m == 0) ? h(k[1]) : a(m)
		}, a, b)
	}
};
u.ns("d.r");
d.r = {
	stats: function(b, a) {
		u.get(s.web.svc + "rpt_mystats.do?r=" + Math.random(), function(e) {
			var f = e[0];
			(f == 0) ? b(e[1]) : a(f)
		}, a)
	},
	bet: function(e, f, a) {
		if (s.debugMode) {
			var b = [
				[21, "20170118-0931", 2, 0.6, 0, 54710034],
				[22, "20170118-0931", 2, 0.6, 0, 54710034],
				[23, "20170118-0931", 2, 0.6, 0, 54710034],
				[24, "20170118-0931", 2, 0.6, 0, 54710034],
				[20, "20170118-0931", 2, 0.6, 0, 54710034],
				[11, "20170118-0950", 2, 4, 0, 54710072],
				[12, "20170118-0950", 2, 2, 0, 54710069],
				[13, "20170118-78", 0, 2, 0, 54710066],
				[14, "20170118-0948", 2, 2, 0, 54710063],
				[15, "20170118-80", 0, 2, 0, 54710060],
				[16, "N/A", 2, 2, 0, 54710056],
				[17, "N/A", 1, 6, 4.6, 54710052],
				[18, "20170118-0932", 1, 0.2, 0.46, 54710046],
				[19, "20170118-0931", 1, 0.2, 0.46, 54710037],
				[20, "20170118-0931", 2, 0.6, 0, 54710034],
				[0, "20170120-0181", 1, 30, 23.28, 55030022],
				[1, "20170120-0181", 1, 20, 23.02, 55030019],
				[2, "20170120-0181", 1, 60, 69.84, 55030016],
				[3, "20170120-0181", 2, 30, 0, 55030013],
				[5, "20170120-0181", 2, 40, 0, 55030010],
				[6, "20170120-0181", 1, 200, 349.2, 55030007],
				[7, "20170120-0181", 1, 40, 38.8, 55030004],
				[8, "20170120-0181", 1, 20, 87.3, 55030001],
				[9, "20170120-0181", 2, 4, 0, 55020004],
				[10, "20170120-0181", 3, 4, 0, 55020001]
			];
			setTimeout(function() {
				f(b)
			}, 100)
		} else {
			u.get(s.web.svc + "lastorders.do?r=" + Math.random(), function(h) {
				var j = h[0];
				(j == 0) ? f(h[1]) : a(j)
			}, a)
		}
	},
	issue: function(e, f, a) {
		var h = g.id();
		if (s.debugMode) {
			var b = [];
			switch (h) {
			case 0:
			case 3:
			case 6:
			case 7:
			case 10:
			case 18:
			case 19:
			case 23:
				b = [
					["20151105-023", "91064", 44063, 10, "20151105-024", "2015-Nov-05 10:00:00"],
					["20151105-022", "02145", 44062],
					["20151105-021", "64448", 44061],
					["20151105-020", "84365", 44060],
					["20151105-019", "11658", 44059],
					["20151105-018", "01228", 44058],
					["20151105-017", "06155", 44057],
					["20151105-016", "74809", 44056],
					["20151105-015", "78330", 44055],
					["20151105-014", "95624", 44054],
					["20151105-014", "95624", 44054],
					["20151105-014", "95624", 44054],
					["20151105-014", "95624", 44054],
					["20151105-014", "95624", 44054]
				];
				break;
			case 1:
			case 2:
			case 5:
			case 8:
			case 29:
				b = [
					["20170710-46", "195a4", 76231, 246, "20170710-47", "2017-Jul-10 16:15:00"],
					["20170710-45", "13925", 76230],
					["20170710-44", "14725", 76229],
					["20170710-43", "6a451", 76228],
					["20170710-42", "1749b", 76227],
					["20170710-41", "b4637", 76226],
					["20170710-40", "169b5", 76225],
					["20170710-39", "7ab83", 76224],
					["20170710-38", "45329", 76223],
					["20170710-37", "a3624", 76222]
				];
				break;
			case 9:
			case 22:
			case 24:
				b = [
					["20151105-0360", "148", 682920, 3915, "20151105-0361", "2015-Nov-05 09:00:15"],
					["20151105-0359", "597", 682919],
					["20151105-0358", "652", 682918],
					["20151105-0357", "472", 682917],
					["20151105-0356", "297", 682916],
					["20151105-0355", "290", 682915],
					["20151105-0354", "377", 682914],
					["20151105-0353", "096", 682913],
					["20151105-0352", "081", 682912],
					["20151105-0351", "889", 682911],
					["20151105-0351", "889", 682911],
					["20151105-0351", "889", 682911],
					["20151105-0351", "889", 682911],
					["20151105-0351", "889", 682911],
					["20151105-0351", "889", 682911]
				];
				break;
			case 11:
				b = [
					["20151104", "3459.64", 7, 26083, "20151105", "2015-Nov-05 15:10:00"],
					["20151103", "3316.70", 6],
					["20151102", "3325.08", 5],
					["20151030", "3382.56", 4],
					["20151029", "3387.32", 3],
					["20151028", "3375.20", 2],
					["20151027", "3434.34", 1],
					["20151027", "3434.34", 1],
					["20151027", "3434.34", 1],
					["20151027", "3434.34", 1],
					["20151027", "3434.34", 1],
					["20151027", "3434.34", 1]
				];
				break;
			case 13:
			case 14:
			case 30:
				b = [
					["20170120-0907", "111", 3067, 29, "20170120-0908", "2017-Jan-20 21:07:05"],
					["20170120-0906", "422", 3066],
					["20170120-0905", "321", 3065],
					["20170120-0904", "651", 3064],
					["20170120-0903", "321", 3063],
					["20170120-0902", "312", 3062],
					["20170120-0901", "666", 3061],
					["20170120-0900", "315", 3060],
					["20170120-0899", "564", 3059],
					["20170120-0898", "246", 3058]
				];
				break;
			case 20:
			case 21:
				b = [
					["20170120-0907", "a987456321", 3067, 29, "20170120-0908", "2017-Jan-20 21:07:05"],
					["20170120-0906", "a987456321", 3066],
					["20170120-0905", "321", 3065],
					["20170120-0904", "987456321", 3064],
					["20170120-0903", "987456321", 3063],
					["20170120-0902", "987456321", 3062],
					["20170120-0901", "987456321", 3061],
					["20170120-0900", "987456321", 3060],
					["20170120-0899", "987456321", 3059],
					["20170120-0898", "a987456321", 3058]
				]
			}
			setTimeout(function() {
				f(b)
			}, 200)
		} else {
			u.get(s.web.svc + "result.do?p=" + h + "&r=" + Math.random(), function(j) {
				var k = j[0];
				(k == 0) ? f(j[1]) : a(k)
			}, a)
		}
	}
};
u.ns("d.p");
d.p = {
	c: 0,
	register: function(a) {
		var b = g.id();
		u.get(s.web.svc + "reg.do?game=" + b + "&r=" + Math.random(), function(e) {
			a({
				d: e
			})
		}, function(e) {
			setTimeout(function() {
				d.p.register(a)
			}, 10000)
		})
	}
};
u.ns("d.c");
d.c = {
	history: function(b, e, a) {
		u.get(s.web.svc + "issuehistory.do?p=[" + b.id + "," + b.t + "," + b.lastIssue + "]", function(f) {
			var h = f[0];
			(h == 0) ? e(f[1]) : a(h)
		}, a)
	}
};
u.ns("d.n");
d.n = {
	news: null,
	list: function(b, a) {
		u.get(s.web.svc + "chkupdate.do?r=" + Math.random(), function(e) {
			var f = e[0];
			(f == 0) ? b(e[1]) : a(f)
		}, a)
	}
};
u.ns("d.a");
d.a = {
	config: function() {
		var a = {};
		a.cp = ui.c;
		a.m = {
			id: "",
			n: "",
			b: 0,
			u: 100,
			r: "2",
			g: {
				pn: 1700,
				px: 1950,
				p: 1700,
				r: 0
			}
		};
		return a
	},
	ticker: function(a, e, b) {
		var f = "";
		$(a).each(function(h, j) {
			f += '"' + j.code + '",'
		});
		u.get(s.web.svc + "ticker.do?p=[" + f.substring(0, f.length - 1) + "]&r=" + Math.random(), function(h) {
			var j = h[0];
			(j == 0) ? e(h[1]) : b(j)
		}, b)
	},
	save: function(e) {
		var b = [],
			f = g.id(),
			a = _.find(s.g.type, function(h) {
				return h.id.toUpperCase() == g.type().toUpperCase()
			});
		b.push(f);
		b.push(e.u);
		b.push(e.p);
		b.push(parseInt(a.val));
		u.post(s.web.svc + "savesetting.do", b, function(h) {
			var j = h[0];
			if (j != 0) {}
		}, function(h) {
			u.alert(l.sys.error)
		})
	}
};