<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body style="padding:0">

<div style="padding:10px;clear: both;">  
    <div id="psLine" style="height:660px;"></div>
</div>  
</body>  
<script src="echarts.js"></script>  
<script src="jquery-1.10.1.min.js"></script>  

<script type="text/javascript">
  var myChart = echarts.init(document.getElementById('psLine'));
  option = {
    title : {
        text: '波动K线图'
    },
    tooltip : {
        trigger: 'axis',
        formatter: function (params) {
            var res = params[0].seriesName + ' ' + params[0].name;
            res += '<br/>  开盘 : ' + params[0].value[0] + '  最高 : ' + params[0].value[3];
            res += '<br/>  收盘 : ' + params[0].value[1] + '  最低 : ' + params[0].value[2];
            return res;
        }
    },
    legend: {
        data:['波动K线图']
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataZoom : {show: true},
            dataView : {show: true, readOnly: false},
            magicType: {show: true, type: ['line', 'bar']},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    xAxis : [
        {
            type : 'category',
            boundaryGap : true,
            axisTick: {onGap:false},
            splitLine: {show:false},
            data : []
        }
    ],
    yAxis : [
        {
            type : 'value',
            scale:true,
            boundaryGap: [0.01, 0.01]
        }
    ],
    series : [
        {
            name:'期数',
            type:'k',
            data:[]
        }
    ]
};
  
  myChart.setOption(option);
  var ajax = function() {
      $.ajax({
          url : 'http://localhost:8011/chart/tecentOnlineData?limit=120',
          success: function(responseText) {
             //请求成功时处理
              //var responseText = eval('(' + responseText + ')'); 
              option.xAxis[0].data = responseText.xAxis;
              option.series[0].data = responseText.series;
             //alert(option.series);
              myChart.setOption(option,true);
          },
          complete: function() {
              //请求完成的处理
          },
          error: function() {
              //请求出错处理
              alert("加载失败");
          }
      })
  }
  var draw = function () {
      window.setInterval(ajax,2000);
  }
  draw();
 // window.setTimeout(ajax,100);
</script>  